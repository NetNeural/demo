
> netneural-iot-platform@3.6.0 test
> jest

 ⚠ Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /workspaces/MonoRepo/package-lock.json as the root directory.
 To silence this warning, set `outputFileTracingRoot` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/output#caveats for more information.
 Detected additional lockfiles: 
   * /workspaces/MonoRepo/development/package-lock.json

PASS __tests__/integrations/integrations-api.test.tsx
  Integrations API - Full Stack Tests
    Database Schema Validation
      ✓ device_integrations table has correct structure (7 ms)
      ✓ integration_type has valid constraints (1 ms)
      ✓ status has valid constraints (1 ms)
    GET /integrations - List Integrations
      ✓ returns 401 without authentication (12 ms)
      ✓ requires organization_id parameter for non-super-admins (1 ms)
      ✓ filters by integration type when specified (3 ms)
      ✓ includes device count in response (1 ms)
    POST /integrations - Create Integration
      ✓ returns 400 with missing required fields (1 ms)
      ✓ validates integration_type against allowed values (1 ms)
      ✓ creates Golioth integration with valid data (1 ms)
      ✓ creates Email integration with SMTP settings (1 ms)
      ✓ creates Slack integration with webhook URL (5 ms)
      ✓ creates Custom Webhook integration (4 ms)
      ✓ enforces RLS - cannot create integration for unauthorized org
    PUT /integrations - Update Integration
      ✓ returns 400 without integration id (1 ms)
      ✓ updates integration name
      ✓ updates integration settings (1 ms)
      ✓ validates status values
      ✓ updates status to inactive (1 ms)
      ✓ returns 404 for non-existent integration
    DELETE /integrations - Delete Integration
      ✓ returns 400 without integration id (1 ms)
      ✓ deletes integration successfully
      ✓ returns success even for non-existent integration (idempotent)
    Integration Type Specific Tests
      ✓ Golioth integration requires apiKey and projectId (1 ms)
      ✓ Email integration requires SMTP configuration
      ✓ Slack integration requires webhook URL
      ✓ Webhook integration requires URL
      ✓ MQTT integration requires broker configuration (1 ms)
      ✓ AWS IoT integration requires credentials
      ✓ Azure IoT Hub integration requires connection string
    RLS Policy Tests
      ✓ verifies super_admin role can access all integrations
      ✓ verifies regular user can only access their org integrations (1 ms)
      ✓ verifies admin/owner can create integrations
      ✓ verifies viewer cannot modify integrations (1 ms)
  Integration Frontend Component Tests
    ✓ validates integration type selection
    ✓ validates required field checks before submission (4 ms)
    ✓ maps integration status to UI badge variants (1 ms)
    ✓ renders correct icon for each integration type

FAIL __tests__/components/sensors/AlertsThresholdsCard.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../src/__tests__/utils/test-utils' from '__tests__/components/sensors/AlertsThresholdsCard.test.tsx'

      59 |     })),
      60 |   })),
    > 61 | }))
         |    ^
      62 |
      63 | describe('AlertsThresholdsCard Component', () => {
      64 |   const mockDevice = createMockDevice({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (__tests__/components/sensors/AlertsThresholdsCard.test.tsx:61:20)

PASS __tests__/edge-functions/integration-webhook.test.tsx
  Golioth Webhook Edge Function
    Webhook Signature Verification
      ✓ should reject webhook without signature header (1 ms)
      ✓ should reject webhook with invalid signature (1 ms)
      ✓ should accept webhook with valid signature (6 ms)
      ✓ should reject webhook without integration ID (1 ms)
      ✓ should reject webhook for disabled integration
    Device Update Events
      ✓ should process device.updated event for existing device (1 ms)
      ✓ should update device status only
      ✓ should update device metadata
      ✓ should handle device.updated for non-existent device gracefully (1 ms)
    Device Create Events
      ✓ should queue device.created event for sync
      ✓ should not queue duplicate device.created events (3 ms)
    Device Delete Events
      ✓ should process device.deleted event
      ✓ should mark deleted device as offline (1 ms)
    Device Status Change Events
      ✓ should process device.status_changed event
      ✓ should update last_seen timestamp on status change (1 ms)
    Event Logging
      ✓ should log all webhook events to sync_log
      ✓ should include event details in log (1 ms)
    Unknown Events
      ✓ should handle unknown event types gracefully
    Error Handling
      ✓ should handle malformed JSON (2 ms)
      ✓ should handle database errors gracefully
      ✓ should handle missing event field
      ✓ should handle missing data field (1 ms)
    Business Logic
      ✓ should only process webhooks for correct organization
      ✓ should preserve device data integrity on update
      ✓ should maintain webhook processing order (1 ms)

PASS __tests__/organizations/organization-management.test.tsx
  Organization Management - Complete Coverage
    Organization Creation
      ✓ should create organization with valid data (1 ms)
      ✓ should enforce unique organization slug
      ✓ should validate slug format (lowercase, alphanumeric, hyphens) (1 ms)
      ✓ should auto-create owner as first member
      ✓ should set default settings on creation (1 ms)
    Organization Retrieval
      ✓ should get all organizations for user (1 ms)
      ✓ should get single organization by ID
      ✓ should get organization by slug
      ✓ should include member count in organization list (1 ms)
    Organization Updates
      ✓ should update organization name (1 ms)
      ✓ should update organization settings
      ✓ should not allow updating slug (1 ms)
      ✓ should only allow owner to update organization (1 ms)
    Member Management
      ✓ should add member to organization (1 ms)
      ✓ should prevent duplicate members
      ✓ should update member role
      ✓ should remove member from organization (1 ms)
      ✓ should prevent removing last owner
      ✓ should get all members for organization (1 ms)
    Role-Based Access Control
      ✓ owner can do everything
      ✓ admin can manage but not delete organization
      ✓ member has read-only access
      ✓ should enforce RLS on organization access (1 ms)
    Organization Deletion
      ✓ should soft delete organization
      ✓ should prevent deletion if organization has active devices
      ✓ should cascade delete members when deleting organization
    Business Logic
      ✓ should calculate organization device quota usage
      ✓ should prevent adding devices when quota exceeded (5 ms)
      ✓ should send invitation email when adding member (1 ms)
    Performance Tests
      ✓ should efficiently query organizations with member counts

PASS __tests__/alerts/alert-system.test.tsx
  Alert System - Complete Coverage
    Alert Creation
      ✓ should create alert with all required fields (2 ms)
      ✓ should validate alert_type
      ✓ should validate severity levels (1 ms)
      ✓ should auto-set created_at timestamp
      ✓ should prevent duplicate active alerts for same condition (1 ms)
    Alert Retrieval
      ✓ should get all active alerts for organization (1 ms)
      ✓ should filter alerts by severity
      ✓ should filter alerts by device (1 ms)
      ✓ should get alert count by severity
      ✓ should get recent alerts (last 24 hours)
    Alert Updates
      ✓ should acknowledge alert (1 ms)
      ✓ should resolve alert
      ✓ should add notes to alert (1 ms)
    Alert Rules
      ✓ should create alert rule (1 ms)
      ✓ should evaluate threshold rule (2 ms)
      ✓ should evaluate offline rule
      ✓ should enable/disable alert rule (1 ms)
      ✓ should get all enabled rules for organization
    Alert Notifications
      ✓ should send notification when alert created
      ✓ should send email notification (1 ms)
      ✓ should send webhook notification
      ✓ should respect notification preferences
      ✓ should not spam notifications for same alert
    Business Logic
      ✓ should auto-resolve alert when condition clears
      ✓ should escalate unacknowledged critical alerts (1 ms)
      ✓ should group related alerts
      ✓ should calculate alert resolution time
      ✓ should track alert metrics (1 ms)
    Performance Tests
      ✓ should efficiently query active alerts
      ✓ should handle bulk alert creation (1 ms)

PASS __tests__/devices/device-management.test.tsx
  Device Management - Complete Coverage
    Device Creation (POST /api/devices)
      ✓ should create device with all required fields (2 ms)
      ✓ should reject device without required organization_id
      ✓ should enforce unique device_id per organization
      ✓ should set default status to "active" if not provided (1 ms)
      ✓ should store metadata as JSONB (1 ms)
    Device Retrieval (GET /api/devices)
      ✓ should retrieve all devices for organization
      ✓ should filter devices by status (1 ms)
      ✓ should retrieve single device by ID
      ✓ should return error when device not found (1 ms)
      ✓ should support pagination (1 ms)
    Device Update (PUT /api/devices/:id)
      ✓ should update device name (3 ms)
      ✓ should update device status (1 ms)
      ✓ should update device metadata (1 ms)
      ✓ should not allow updating device_id (2 ms)
      ✓ should update last_seen timestamp on activity (1 ms)
    Device Deletion (DELETE /api/devices/:id)
      ✓ should soft delete device (set status to deleted) (1 ms)
      ✓ should hard delete device (1 ms)
      ✓ should prevent deletion if device has active alerts (7 ms)
    Business Logic - Device Lifecycle
      ✓ should provision new device through integration
      ✓ should sync device state with integration (1 ms)
      ✓ should handle device offline detection
      ✓ should trigger alert when device goes offline (1 ms)
    Row Level Security (RLS)
      ✓ should only return devices for user organization
      ✓ should block access to other organization devices (1 ms)
    Performance Tests
      ✓ should handle bulk device creation
      ✓ should efficiently query large device datasets (1 ms)

PASS __tests__/github-issues/issue-43-integration-e2e.test.tsx
  Issue #43 - Integration Priorities End-to-End
    Priority 1: MQTT Broker Integration - Complete Flow
      ✓ Step 1: Configure MQTT broker (1 ms)
      ✓ Step 2: Save MQTT configuration (1 ms)
      ✓ Step 3: Verify MQTT integration in list
      ✓ Step 4: Connect to MQTT broker (1 ms)
      ✓ Step 5: Receive MQTT message and store in database
      ✓ Step 6: Edit MQTT integration (1 ms)
      ✓ Step 7: Delete MQTT integration (1 ms)
    Priority 2: Golioth Integration - Complete Flow
      ✓ Step 1: Configure Golioth integration (1 ms)
      ✓ Step 2: Save Golioth configuration
      ✓ Step 3: Test Golioth API credentials
      ✓ Step 4: Sync devices from Golioth (1 ms)
      ✓ Step 5: Manual device sync from Golioth (1 ms)
      ✓ Step 6: View Golioth sync history
      ✓ Step 7: Handle Golioth webhook for device updates (1 ms)
    Priority 3: Custom Webhook Integration - Complete Flow
      ✓ Step 1: Configure webhook integration (1 ms)
      ✓ Step 2: Save webhook configuration (1 ms)
      ✓ Step 3: Test webhook endpoint
      ✓ Step 4: Trigger webhook on device.created event (2 ms)
      ✓ Step 5: View webhook event logs (1 ms)
      ✓ Step 6: Handle webhook failure gracefully
      ✓ Step 7: Retry failed webhook deliveries
    Cross-Integration Tests
      ✓ multiple integrations can coexist (1 ms)
      ✓ device can send data through multiple integrations (1 ms)
    Performance and Reliability
      ✓ integrations load within acceptable time
      ✓ handles concurrent integration requests (1 ms)

PASS __tests__/github-issues/issue-42-add-member.test.tsx
  Issue #42 - Add Member Functionality
    Frontend Validation - Add Member Form
      ✓ validates email format before submission (1 ms)
      ✓ validates role selection is required
      ✓ only shows valid role options: member, admin, owner (1 ms)
    Backend API - Members Edge Function
      ✓ POST /members - adds member successfully (8 ms)
      ✓ POST /members - rejects non-existent user email (1 ms)
      ✓ POST /members - prevents duplicate membership (1 ms)
      ✓ POST /members - validates invalid role names (1 ms)
    Business Logic - Permission Validation
      ✓ only admins and owners can add members (1 ms)
      ✓ only owners can add other owners (1 ms)
      ✓ requires organization membership to add members (1 ms)
    Security - Authorization and RLS
      ✓ requires authentication token (1 ms)
      ✓ validates organization_id is required
      ✓ uses admin client to bypass RLS for user lookup
    GET /members - List Members
      ✓ returns all members for organization (1 ms)
    Error Handling and User Feedback
      ✓ shows clear error message for non-existent user (1 ms)
      ✓ shows permission denied error clearly
      ✓ shows success toast after adding member (1 ms)
    End-to-End - Complete Add Member Flow
      ✓ successful flow: open dialog → fill form → submit → refresh list (1 ms)
    Regression Tests - Common Issues
      ✓ handles email with uppercase letters correctly
      ✓ dialog should close after successful add (1 ms)
      ✓ member list should refresh after adding member

PASS __tests__/github-issues/issue-40-mqtt-integration.test.tsx
  Issue #40 - MQTT Integration Save
    Frontend Validation - MqttConfigDialog
      ✓ validates required MQTT broker fields (2 ms)
      ✓ validates MQTT port range (1-65535) (2 ms)
      ✓ validates broker URL format (2 ms)
      ✓ sanitizes MQTT client ID (1 ms)
    Backend API - Integrations Edge Function
      ✓ POST /integrations - creates MQTT integration successfully (1 ms)
      ✓ POST /integrations - rejects invalid MQTT config (2 ms)
      ✓ POST /integrations - requires authentication
      ✓ POST /integrations - requires organization membership
    Business Logic - MQTT Connection Validation
      ✓ validates MQTT broker is reachable (test connection) (1 ms)
      ✓ handles MQTT connection timeout gracefully
      ✓ validates TLS/SSL configuration for secure MQTT (1 ms)
      ✓ validates MQTT topic patterns (6 ms)
    Error Handling - Enhanced Logging
      ✓ logs detailed error information on save failure
      ✓ shows user-friendly error toast on failure (1 ms)
    End-to-End - Full MQTT Integration Flow
      ✓ complete flow: configure → save → verify → list
      ✓ handles network failure during save gracefully
    Regression Tests - Ensure Dialog Closes and List Updates
      ✓ dialog should close after successful save
      ✓ integration should appear in list immediately after save

PASS __tests__/lib/permissions.test.ts
  Permissions Module - Real Source Code Tests
    Organization Management Permissions
      canViewAllOrganizations
        ✓ super admin can view all organizations (1 ms)
        ✓ org owner cannot view all organizations (1 ms)
        ✓ null user cannot view all organizations
      canCreateOrganization
        ✓ super admin can create organizations
        ✓ org owner cannot create organizations
        ✓ null user cannot create organizations (1 ms)
      canManageOrganization
        ✓ super admin can manage any organization
        ✓ org owner can manage their own organization
        ✓ org owner cannot manage other organizations
        ✓ null user cannot manage organizations
      canDeleteOrganization
        ✓ super admin can delete organizations
        ✓ org owner cannot delete organizations
        ✓ null user cannot delete organizations
    User Management Permissions
      canViewAllUsers
        ✓ super admin can view all users (1 ms)
        ✓ org owner cannot view all users
        ✓ null user cannot view all users (1 ms)
      canManageUser
        ✓ super admin can manage any user (1 ms)
        ✓ org owner can manage users in their organization
        ✓ org owner cannot manage users in other organizations
        ✓ user without organization cannot manage users
        ✓ null user cannot manage users
        ✓ cannot manage users without target org (1 ms)
      canInviteUser
        ✓ super admin can invite users
        ✓ org owner can invite users (1 ms)
        ✓ org admin can invite users
        ✓ regular user cannot invite users
        ✓ null user cannot invite users (1 ms)
      canDeleteUser
        ✓ super admin can delete users
        ✓ org owner can delete users
        ✓ org admin can delete users
        ✓ regular user cannot delete users (1 ms)
        ✓ null user cannot delete users
    Device Management Permissions
      canViewDevices
        ✓ any authenticated user can view devices
        ✓ null user cannot view devices (1 ms)
      canCreateDevice
        ✓ super admin can create devices
        ✓ org owner can create devices
        ✓ org admin can create devices
        ✓ regular user can create devices
        ✓ viewer cannot create devices
        ✓ null user cannot create devices
      canEditDevice
        ✓ super admin can edit devices
        ✓ org owner can edit devices
        ✓ org admin can edit devices (1 ms)
        ✓ regular user can edit devices
        ✓ viewer cannot edit devices
        ✓ null user cannot edit devices (5 ms)
      canDeleteDevice
        ✓ super admin can delete devices (1 ms)
        ✓ org owner can delete devices
        ✓ org admin can delete devices
        ✓ regular user cannot delete devices (1 ms)
        ✓ viewer cannot delete devices
        ✓ null user cannot delete devices
    Analytics & Reporting Permissions
      canViewPlatformAnalytics
        ✓ super admin can view platform analytics (1 ms)
        ✓ org owner cannot view platform analytics
        ✓ null user cannot view platform analytics
      canViewOrganizationAnalytics
        ✓ super admin can view organization analytics (1 ms)
        ✓ org owner can view organization analytics
        ✓ org admin can view organization analytics
        ✓ regular user cannot view organization analytics (1 ms)
        ✓ null user cannot view organization analytics
    Settings Permissions
      canConfigureGlobalSettings
        ✓ super admin can configure global settings
        ✓ org owner cannot configure global settings
        ✓ null user cannot configure global settings
      canConfigureOrganizationSettings
        ✓ super admin can configure organization settings (1 ms)
        ✓ org owner can configure organization settings
        ✓ org admin cannot configure organization settings
        ✓ null user cannot configure organization settings
      canManageIntegrations
        ✓ super admin can manage integrations (1 ms)
        ✓ org owner can manage integrations
        ✓ org admin can manage integrations
        ✓ regular user cannot manage integrations
        ✓ null user cannot manage integrations (1 ms)
    Organization Access
      canAccessOrganization
        ✓ super admin can access any organization
        ✓ org owner can access their organization
        ✓ org owner cannot access other organizations
        ✓ null user cannot access organizations (1 ms)
      getAccessibleOrganizations
        ✓ super admin can access all organizations
        ✓ org owner can access their organization
        ✓ null user cannot access any organizations
    Role Helper Functions
      hasAnyRole
        ✓ should return true when user has one of the roles (1 ms)
        ✓ should return false when user does not have any of the roles
        ✓ should return false for null user
      hasMinimumRole
        ✓ should return true when user has minimum role or higher (1 ms)
        ✓ should return false when user has lower role
        ✓ should return true for exact role match
        ✓ should return false for null user (1 ms)
    Edge Cases and Security Tests
      ✓ super admin with null organizationId still has full access
      ✓ user without organizationId has limited access
      ✓ all permission functions handle null user gracefully (1 ms)
      ✓ viewer role has most restricted permissions

PASS __tests__/services/service-layer.test.tsx
  Service Layer - Complete Coverage
    Device Service
      ✓ should fetch device by ID (2 ms)
      ✓ should create new device
      ✓ should update device status (1 ms)
      ✓ should delete device
      ✓ should list devices for organization (1 ms)
    Auth Service
      ✓ should sign in user with email and password
      ✓ should get current user (1 ms)
      ✓ should sign out user
      ✓ should handle failed login (1 ms)
    Integration Service
      ✓ should test integration connection
      ✓ should trigger device sync (1 ms)
      ✓ should get pending conflicts (1 ms)
      ✓ should resolve conflict
    Organization Service
      ✓ should create organization (1 ms)
      ✓ should list user organizations (1 ms)
      ✓ should add member to organization
      ✓ should remove member from organization (1 ms)
      ✓ should update member role (1 ms)
    Alert Service
      ✓ should create alert
      ✓ should list active alerts (1 ms)
      ✓ should acknowledge alert
      ✓ should send notification for alert
      ✓ should filter alerts by severity (1 ms)
    Error Handling
      ✓ should handle database errors (2 ms)
      ✓ should handle network errors (31 ms)
      ✓ should handle authentication errors (1 ms)
    Data Validation
      ✓ should validate email format
      ✓ should validate device ID format (1 ms)
      ✓ should validate organization slug
    Pagination
      ✓ should paginate results (1 ms)
      ✓ should calculate total pages
    Caching
      ✓ should cache frequently accessed data (1 ms)
      ✓ should invalidate cache on update (1 ms)

PASS __tests__/critical-issues/issue-107-rule-builder.test.tsx
  Issue #107: Rule Builder Page
    Rule Type Selection
      ✓ should support telemetry rule type
      ✓ should support offline rule type
    Telemetry Rule Creation
      ✓ should create temperature threshold rule
      ✓ should create battery low rule (1 ms)
      ✓ should support all comparison operators
      ✓ should support duration-based conditions
    Offline Rule Creation
      ✓ should create offline detection rule (1 ms)
      ✓ should support grace period for new devices
      ✓ should validate offline time ranges (1 ms)
    Device Scope Selection
      ✓ should scope to all devices
      ✓ should scope to specific groups
      ✓ should scope to specific tags
      ✓ should scope to specific devices
    Rule Evaluation Logic
      ✓ should evaluate telemetry rule - threshold exceeded (1 ms)
      ✓ should evaluate telemetry rule - threshold not exceeded
      ✓ should evaluate offline rule - device is offline
      ✓ should evaluate offline rule - device is online
      ✓ should respect cooldown period
    Dry Run Testing
      ✓ should calculate affected devices for telemetry rule (1 ms)
      ✓ should calculate affected devices for offline rule (1 ms)
      ✓ should show preview count in rule builder
    Rule Actions Configuration
      ✓ should configure email action (1 ms)
      ✓ should configure SMS action
      ✓ should configure webhook action
      ✓ should support multiple actions (1 ms)
    Rule Validation
      ✓ should validate required fields
      ✓ should reject rule without actions
      ✓ should validate threshold values
      ✓ should validate offline minutes range (1 ms)
    Rule List Management
      ✓ should list all rules for organization
      ✓ should filter rules by type
      ✓ should toggle rule enabled status (1 ms)
      ✓ should duplicate rule
    Database Schema Validation
      ✓ should define alert_rules table structure (1 ms)
      ✓ should store condition as JSONB (7 ms)

  console.log
    [EdgeFunction devices-1771558667203-ut2v70c] → GET devices { params: undefined, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667203-ut2v70c] ← undefined (8ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667214-r1u6xz7] → GET devices { params: undefined, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667214-r1u6xz7] ← undefined (1ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667235-4k78dkq] → GET devices { params: { organization_id: 'org-123' }, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667235-4k78dkq] ← undefined (1ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667239-z1a8c6k] → POST devices { params: undefined, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667239-z1a8c6k] ← undefined (1ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices/device-123-1771558667242-ymm5ikb] → PUT devices/device-123 { params: undefined, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices/device-123-1771558667242-ymm5ikb] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices/device-123-1771558667247-r1k4fv9] → DELETE devices/device-123 { params: undefined, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices/device-123-1771558667247-r1k4fv9] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction locations-1771558667252-g0hgpy0] → GET locations { params: { organization_id: 'org-123' }, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction locations-1771558667252-g0hgpy0] ← undefined (1ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction locations-1771558667255-s6g2c8u] → POST locations { params: undefined, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction locations-1771558667255-s6g2c8u] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction locations-1771558667258-a1kxqe5] → PATCH locations { params: { id: 'loc-123' }, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction locations-1771558667258-a1kxqe5] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction locations-1771558667261-9xwab01] → DELETE locations { params: { id: 'loc-123' }, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction locations-1771558667261-9xwab01] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction alerts-1771558667267-1jkfu0h] → GET alerts {
      params: { organization_id: 'org-123', severity: 'critical', resolved: false },
      hasBody: false
    }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction alerts-1771558667267-1jkfu0h] ← undefined (1ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction alerts/alert-123/acknowledge-1771558667271-7vcvadn] → PATCH alerts/alert-123/acknowledge { params: undefined, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction alerts/alert-123/acknowledge-1771558667271-7vcvadn] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction integration-test-1771558667274-rqwhbfu] → POST integration-test { params: undefined, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction integration-test-1771558667274-rqwhbfu] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction device-sync-1771558667280-s0n0srb] → POST device-sync { params: undefined, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction device-sync-1771558667280-s0n0srb] ← undefined (3ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction members-1771558667287-ibte67s] → GET members { params: { organization_id: 'org-123' }, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction members-1771558667287-ibte67s] ← undefined (0ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction members-1771558667299-285mmi9] → POST members { params: { organization_id: 'org-123' }, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction members-1771558667299-285mmi9] ← undefined (1ms) { success: true, hasData: true, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction members-1771558667301-vw1y8ai] → PATCH members { params: { organization_id: 'org-123' }, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction members-1771558667301-vw1y8ai] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction members-1771558667305-qlda9xr] → DELETE members { params: { organization_id: 'org-123' }, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction members-1771558667305-qlda9xr] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction create-user-1771558667308-pb0unj5] → POST create-user { params: undefined, hasBody: true }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction create-user-1771558667308-pb0unj5] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667313-r5mosiv] → GET devices { params: undefined, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667313-r5mosiv] ← undefined (0ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667315-830ifxv] → GET devices { params: { organization_id: 'org-123' }, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667315-830ifxv] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667318-hx4v48o] → GET devices { params: undefined, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667318-hx4v48o] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667321-bzw9j2y] → GET devices {
      params: { org_id: 'org-123', limit: undefined, offset: 0 },
      hasBody: false
    }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

  console.log
    [EdgeFunction devices-1771558667321-bzw9j2y] ← undefined (1ms) { success: true, hasData: false, hasError: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:161:17)

  console.log
    [EdgeFunction devices-1771558667324-cpma7ad] → GET devices { params: { search: 'device name with spaces' }, hasBody: false }

      at EdgeFunctionClient.log [as call] (src/lib/edge-functions/client.ts:146:17)

FAIL __tests__/lib/edge-functions-client.test.ts
  EdgeFunctionClient
    Authentication
      ✓ should include auth token in requests (11 ms)
      ✕ should handle missing session gracefully (7 ms)
    Devices API
      ✓ should list devices with organization filter (4 ms)
      ✓ should create a new device (3 ms)
      ✓ should update a device (5 ms)
      ✓ should delete a device (3 ms)
    Locations API
      ✓ should list locations (5 ms)
      ✓ should create a location (3 ms)
      ✓ should update a location (3 ms)
      ✓ should delete a location (4 ms)
    Alerts API
      ✓ should list alerts with filters (6 ms)
      ✓ should acknowledge an alert (3 ms)
    Integrations API
      ✕ should test an integration (6 ms)
      ✓ should trigger device sync (6 ms)
    Dashboard Stats API
      ✕ should get dashboard statistics
    Members API
      ✓ should list members (12 ms)
      ✓ should add a member (2 ms)
      ✕ should update member role (3 ms)
      ✓ should remove a member (2 ms)
    Users API
      ✓ should create a new user (3 ms)
    Notifications API
      ✕ should send a notification (1 ms)
      ✕ should test notification configuration (1 ms)
    MQTT Broker API
      ✕ should connect to MQTT broker
    Error Handling
      ✕ should handle network errors gracefully (2 ms)
      ✕ should handle API error responses (2 ms)
      ✕ should handle malformed JSON responses (3 ms)
    Query Parameters
      ✓ should handle undefined query parameters (3 ms)
      ✕ should encode special characters in params (3 ms)

  ● EdgeFunctionClient › Authentication › should handle missing session gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"headers": ObjectNotContaining {"Authorization": Any<String>}}
    Received: "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/devices", {"headers": {"Authorization": "Bearer local-anon-key-placeholder", "Content-Type": "application/json"}, "method": "GET"}

    Number of calls: 1

      69 |       await newClient.call('devices')
      70 |
    > 71 |       expect(mockFetch).toHaveBeenCalledWith(
         |                         ^
      72 |         expect.any(String),
      73 |         expect.objectContaining({
      74 |           headers: expect.not.objectContaining({

      at Object.toHaveBeenCalledWith (__tests__/lib/edge-functions-client.test.ts:71:25)

  ● EdgeFunctionClient › Integrations API › should test an integration

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/integration-test/int-123", ObjectContaining {"method": "POST"}
    Received: "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/integration-test", {"body": "{\"integrationId\":\"int-123\"}", "headers": {"Authorization": "Bearer mock-token-12345", "Content-Type": "application/json"}, "method": "POST"}

    Number of calls: 1

      274 |       await client.integrations.test('int-123')
      275 |
    > 276 |       expect(mockFetch).toHaveBeenCalledWith(
          |                         ^
      277 |         expect.stringContaining('/integration-test/int-123'),
      278 |         expect.objectContaining({
      279 |           method: 'POST',

      at Object.toHaveBeenCalledWith (__tests__/lib/edge-functions-client.test.ts:276:25)

  ● EdgeFunctionClient › Dashboard Stats API › should get dashboard statistics

    TypeError: Cannot read properties of undefined (reading 'get')

      318 |       } as Response)
      319 |
    > 320 |       const response = await client.dashboardStats.get('org-123')
          |                                                    ^
      321 |
      322 |       expect(response.success).toBe(true)
      323 |       expect(response.data?.devices.total).toBe(10)

      at Object.get (__tests__/lib/edge-functions-client.test.ts:320:52)

  ● EdgeFunctionClient › Members API › should update member role

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "organization_id=org-123", ObjectContaining {"body": StringContaining "admin", "method": "PUT"}
    Received: "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/members?organization_id=org-123", {"body": "{\"memberId\":\"user-123\",\"role\":\"admin\"}", "headers": {"Authorization": "Bearer mock-token-12345", "Content-Type": "application/json"}, "method": "PATCH"}

    Number of calls: 1

      370 |       await client.members.updateRole('org-123', 'user-123', 'admin')
      371 |
    > 372 |       expect(mockFetch).toHaveBeenCalledWith(
          |                         ^
      373 |         expect.stringContaining('organization_id=org-123'),
      374 |         expect.objectContaining({
      375 |           method: 'PUT',

      at Object.toHaveBeenCalledWith (__tests__/lib/edge-functions-client.test.ts:372:25)

  ● EdgeFunctionClient › Notifications API › should send a notification

    TypeError: Cannot read properties of undefined (reading 'send')

      426 |       } as Response)
      427 |
    > 428 |       await client.notifications.send({
          |                                  ^
      429 |         organization_id: 'org-123',
      430 |         integration_id: 'int-123',
      431 |         message: 'Test notification',

      at Object.send (__tests__/lib/edge-functions-client.test.ts:428:34)

  ● EdgeFunctionClient › Notifications API › should test notification configuration

    TypeError: Cannot read properties of undefined (reading 'test')

      448 |       } as Response)
      449 |
    > 450 |       await client.notifications.test('int-123')
          |                                  ^
      451 |
      452 |       const callUrl = mockFetch.mock.calls[0][0] as string
      453 |       expect(callUrl).toContain('test=true')

      at Object.test (__tests__/lib/edge-functions-client.test.ts:450:34)

  ● EdgeFunctionClient › MQTT Broker API › should connect to MQTT broker

    TypeError: Cannot read properties of undefined (reading 'connect')

      462 |       } as Response)
      463 |
    > 464 |       await client.mqttBroker.connect({
          |                               ^
      465 |         organization_id: 'org-123',
      466 |         integration_id: 'int-123',
      467 |         action: 'connect',

      at Object.connect (__tests__/lib/edge-functions-client.test.ts:464:31)

  ● EdgeFunctionClient › Error Handling › should handle network errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      484 |       const response = await client.call('devices')
      485 |
    > 486 |       expect(response.success).toBe(false)
          |                                ^
      487 |       expect(response.error?.message).toContain('Network error')
      488 |     })
      489 |

      at Object.toBe (__tests__/lib/edge-functions-client.test.ts:486:32)

  ● EdgeFunctionClient › Error Handling › should handle API error responses

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      499 |       const response = await client.devices.list('org-123')
      500 |
    > 501 |       expect(response.success).toBe(false)
          |                                ^
      502 |       expect(response.error?.message).toBe('Unauthorized')
      503 |       expect(response.error?.status).toBe(401)
      504 |     })

      at Object.toBe (__tests__/lib/edge-functions-client.test.ts:501:32)

  ● EdgeFunctionClient › Error Handling › should handle malformed JSON responses

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      514 |       const response = await client.call('devices')
      515 |
    > 516 |       expect(response.success).toBe(false)
          |                                ^
      517 |       expect(response.error?.message).toContain('Invalid JSON')
      518 |     })
      519 |   })

      at Object.toBe (__tests__/lib/edge-functions-client.test.ts:516:32)

  ● EdgeFunctionClient › Query Parameters › should encode special characters in params

    expect(received).toContain(expected) // indexOf

    Expected substring: "device%20name%20with%20spaces"
    Received string:    "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/devices?search=device+name+with+spaces"

      553 |
      554 |       const callUrl = mockFetch.mock.calls[0][0] as string
    > 555 |       expect(callUrl).toContain('device%20name%20with%20spaces')
          |                       ^
      556 |     })
      557 |   })
      558 | })

      at Object.toContain (__tests__/lib/edge-functions-client.test.ts:555:23)

FAIL __tests__/components/organizations/EditOrganizationDialog.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/organizations/EditOrganizationDialog.test.tsx

      18 |   }),
      19 | }));
    > 20 |
         | ^
      21 | // Mock Supabase client
      22 | const mockGetSession = jest.fn();
      23 | const mockCreateClient = jest.fn(() => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/organizations/EditOrganizationDialog.test.tsx:20:17)

PASS __tests__/edge-functions/integrations-function.test.tsx
  Integrations Edge Function - Complete Coverage
    GET /integrations - List Integrations
      ✓ should return all integrations for organization (1 ms)
      ✓ should filter integrations by organization_id (1 ms)
      ✓ should return 401 without authentication
      ✓ should enrich integrations with device counts
      ✓ should handle empty integration list (1 ms)
    POST /integrations - Create Integration
      ✓ should create Golioth integration
      ✓ should validate required fields
      ✓ should validate integration_type (1 ms)
      ✓ should test integration before creating
      ✓ should create AWS IoT integration
      ✓ should create Azure IoT integration (1 ms)
      ✓ should create MQTT integration (1 ms)
      ✓ should enforce organization permissions (1 ms)
    PUT /integrations/:id - Update Integration
      ✓ should update integration name (1 ms)
      ✓ should update integration settings
      ✓ should update integration status
      ✓ should return 404 for non-existent integration (1 ms)
      ✓ should validate status values (1 ms)
    DELETE /integrations/:id - Delete Integration
      ✓ should delete integration
      ✓ should return 404 for non-existent integration
      ✓ should prevent deletion if integration has devices (1 ms)
      ✓ should enforce organization permissions (1 ms)
    POST /integrations/:id/test - Test Integration
      ✓ should test Golioth connection (1 ms)
      ✓ should return failure for invalid credentials (1 ms)
      ✓ should test AWS IoT connection
      ✓ should test MQTT connection
      ✓ should handle connection timeout (1 ms)
    Error Handling
      ✓ should handle database errors (1 ms)
      ✓ should handle malformed JSON (1 ms)
      ✓ should handle missing authorization header (1 ms)
      ✓ should handle invalid authorization token
    CORS Headers
      ✓ should include CORS headers in response
      ✓ should handle OPTIONS preflight request
    Rate Limiting
      ✓ should enforce rate limits (1 ms)
    Pagination
      ✓ should support pagination parameters (1 ms)
    Business Logic
      ✓ should encrypt API keys before storing (1 ms)
      ✓ should log integration activity (1 ms)
      ✓ should validate integration quota

PASS __tests__/critical-issues/issue-108-alert-management.test.tsx
  Issue #108: Alert Management Redesign
    Tab Filtering
      ✓ should filter "All" tab to show all alerts (1 ms)
      ✓ should filter "Unacknowledged" tab
      ✓ should filter "Device Offline" tab (connectivity category) (1 ms)
      ✓ should filter "Security" tab
      ✓ should filter "Environmental" tab (temperature + vibration)
    Alert Grouping by Category
      ✓ should group alerts by category (1 ms)
      ✓ should calculate group counts (2 ms)
      ✓ should support collapsible group state
    Bulk Acknowledge Operations
      ✓ should select multiple alerts (2 ms)
      ✓ should select all unacknowledged alerts (2 ms)
      ✓ should clear selection after bulk acknowledge (1 ms)
      ✓ should format bulk acknowledge request
    Summary Bar Statistics
      ✓ should count alerts by severity (1 ms)
      ✓ should count unacknowledged alerts
      ✓ should calculate total active alerts (1 ms)
      ✓ should group severity counts by category
    Filtering and Search
      ✓ should filter by severity (1 ms)
      ✓ should filter by category
      ✓ should search by title
      ✓ should search by device name (1 ms)
      ✓ should combine multiple filters
    Sorting Logic
      ✓ should sort by severity descending, then date ascending (1 ms)
    Table View Data Transformation
      ✓ should transform alerts for table display (16 ms)
      ✓ should format timestamps for display
    Performance - Virtualization Check
      ✓ should handle 200 alerts efficiently (1 ms)
    Database Category Field Validation
      ✓ should validate category enum values (1 ms)
      ✓ should reject invalid category
      ✓ should map alert_type to category (1 ms)

FAIL __tests__/components/devices/DeviceStatusCard.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../src/__tests__/utils/test-utils' from '__tests__/components/devices/DeviceStatusCard.test.tsx'

      20 | import { useDeviceStatus } from '@/hooks/useDeviceStatus'
      21 |
    > 22 | // Mock useDeviceStatus hook
         |                    ^
      23 | jest.mock('@/hooks/useDeviceStatus')
      24 |
      25 | const mockUseDeviceStatus = useDeviceStatus as jest.MockedFunction<typeof useDeviceStatus>

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (__tests__/components/devices/DeviceStatusCard.test.tsx:22:20)

FAIL __tests__/lib/utils.test.ts
  Utils Library - Real Source Code Tests
    cn (className merger)
      ✓ should merge class names correctly (10 ms)
      ✓ should handle conditional classes
      ✓ should handle false conditional classes (1 ms)
      ✓ should merge conflicting tailwind classes
    formatCurrency
      ✕ should format USD correctly
      ✕ should format with custom currency (1 ms)
      ✕ should handle zero
      ✕ should handle negative numbers
      ✕ should handle large numbers
    formatDate
      ✕ should format date correctly
      ✕ should handle string dates
      ✕ should accept custom options
      ✕ should handle ISO string dates (1 ms)
    truncateText
      ✕ should truncate long text
      ✕ should not truncate short text
      ✕ should handle exact length
      ✕ should handle empty string
      ✕ should handle zero length
    getInitials
      ✕ should get initials from full name
      ✕ should handle single name
      ✕ should handle three names
      ✕ should convert to uppercase
      ✕ should handle special characters
      ✕ should handle empty string (1 ms)
    generateId
      ✕ should generate unique IDs
      ✕ should generate string IDs
      ✕ should generate non-empty IDs (1 ms)
      ✕ should generate alphanumeric IDs
      ✕ should generate multiple unique IDs
    isValidEmail
      ✕ should validate correct email (1 ms)
      ✕ should validate email with subdomain
      ✕ should validate email with plus
      ✕ should reject email without @ (1 ms)
      ✕ should reject email without domain
      ✕ should reject email without extension
      ✕ should reject empty string (1 ms)
      ✕ should reject email with spaces
      ✕ should validate email with numbers
    getDeviceStatusColor
      ✕ should return green for online (1 ms)
      ✕ should return gray for offline
      ✕ should return yellow for warning
      ✕ should return red for error
      ✕ should handle case insensitive
      ✕ should return default for unknown status
    getAlertSeverityColor
      ✕ should return blue for low
      ✕ should return yellow for medium
      ✕ should return orange for high
      ✕ should return red for critical (1 ms)
      ✕ should handle case insensitive
      ✕ should return default for unknown severity
    calculateUptime
      ✕ should return Unknown for null
      ✕ should calculate minutes ago
      ✕ should calculate hours ago (1 ms)
      ✕ should calculate days ago
      ✕ should handle recent activity (< 1 minute) (1 ms)
      ✕ should handle ISO string format
    Edge Cases and Error Handling
      ✕ truncateText should handle unicode characters
      ✕ getInitials should handle multiple spaces
      ✕ formatCurrency should handle decimal precision
      ✕ isValidEmail should handle edge case emails
      ✕ generateId should not contain special characters
    Integration Tests
      ✕ should format and truncate text together
      ✕ should get initials and validate email
      ✕ should handle device status and alert severity together
    Performance Tests
      ✕ should generate 1000 IDs quickly
      ✕ should validate 1000 emails quickly
      ✕ should truncate 1000 texts quickly

  ● Utils Library - Real Source Code Tests › formatCurrency › should format USD correctly

    TypeError: (0 , _utils.formatCurrency) is not a function

      49 |   describe('formatCurrency', () => {
      50 |     test('should format USD correctly', () => {
    > 51 |       const result = formatCurrency(1234.56)
         |                                    ^
      52 |       expect(result).toBe('$1,234.56')
      53 |     })
      54 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:51:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should format with custom currency

    TypeError: (0 , _utils.formatCurrency) is not a function

      54 |
      55 |     test('should format with custom currency', () => {
    > 56 |       const result = formatCurrency(1234.56, 'EUR')
         |                                    ^
      57 |       expect(result).toContain('1,234.56')
      58 |     })
      59 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:56:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should handle zero

    TypeError: (0 , _utils.formatCurrency) is not a function

      59 |
      60 |     test('should handle zero', () => {
    > 61 |       const result = formatCurrency(0)
         |                                    ^
      62 |       expect(result).toBe('$0.00')
      63 |     })
      64 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:61:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should handle negative numbers

    TypeError: (0 , _utils.formatCurrency) is not a function

      64 |
      65 |     test('should handle negative numbers', () => {
    > 66 |       const result = formatCurrency(-100)
         |                                    ^
      67 |       expect(result).toBe('-$100.00')
      68 |     })
      69 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:66:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should handle large numbers

    TypeError: (0 , _utils.formatCurrency) is not a function

      69 |
      70 |     test('should handle large numbers', () => {
    > 71 |       const result = formatCurrency(1000000)
         |                                    ^
      72 |       expect(result).toBe('$1,000,000.00')
      73 |     })
      74 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:71:36)

  ● Utils Library - Real Source Code Tests › formatDate › should format date correctly

    TypeError: (0 , _utils.formatDate) is not a function

      77 |     test('should format date correctly', () => {
      78 |       const date = new Date('2024-01-15T10:30:00Z')
    > 79 |       const result = formatDate(date)
         |                                ^
      80 |       expect(result).toMatch(/Jan/)
      81 |       expect(result).toMatch(/15/)
      82 |       expect(result).toMatch(/2024/)

      at Object.<anonymous> (__tests__/lib/utils.test.ts:79:32)

  ● Utils Library - Real Source Code Tests › formatDate › should handle string dates

    TypeError: (0 , _utils.formatDate) is not a function

      84 |
      85 |     test('should handle string dates', () => {
    > 86 |       const result = formatDate('2024-01-15')
         |                                ^
      87 |       expect(result).toMatch(/Jan/)
      88 |       expect(result).toMatch(/1[45]/) // Could be 14 or 15 depending on timezone
      89 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:86:32)

  ● Utils Library - Real Source Code Tests › formatDate › should accept custom options

    TypeError: (0 , _utils.formatDate) is not a function

      91 |     test('should accept custom options', () => {
      92 |       const date = new Date('2024-01-15')
    > 93 |       const result = formatDate(date, { month: 'long' })
         |                                ^
      94 |       expect(result).toMatch(/January/)
      95 |     })
      96 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:93:32)

  ● Utils Library - Real Source Code Tests › formatDate › should handle ISO string dates

    TypeError: (0 , _utils.formatDate) is not a function

       96 |
       97 |     test('should handle ISO string dates', () => {
    >  98 |       const result = formatDate('2024-01-15T10:30:00.000Z')
          |                                ^
       99 |       expect(result).toContain('2024')
      100 |     })
      101 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:98:32)

  ● Utils Library - Real Source Code Tests › truncateText › should truncate long text

    TypeError: (0 , _utils.truncateText) is not a function

      104 |     test('should truncate long text', () => {
      105 |       const text = 'This is a very long text that needs to be truncated'
    > 106 |       const result = truncateText(text, 20)
          |                                  ^
      107 |       expect(result).toBe('This is a very long ...')
      108 |       expect(result.length).toBe(23) // 20 + '...'
      109 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:106:34)

  ● Utils Library - Real Source Code Tests › truncateText › should not truncate short text

    TypeError: (0 , _utils.truncateText) is not a function

      111 |     test('should not truncate short text', () => {
      112 |       const text = 'Short text'
    > 113 |       const result = truncateText(text, 20)
          |                                  ^
      114 |       expect(result).toBe('Short text')
      115 |     })
      116 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:113:34)

  ● Utils Library - Real Source Code Tests › truncateText › should handle exact length

    TypeError: (0 , _utils.truncateText) is not a function

      117 |     test('should handle exact length', () => {
      118 |       const text = 'Exactly twenty chars'
    > 119 |       const result = truncateText(text, 20)
          |                                  ^
      120 |       expect(result).toBe('Exactly twenty chars')
      121 |     })
      122 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:119:34)

  ● Utils Library - Real Source Code Tests › truncateText › should handle empty string

    TypeError: (0 , _utils.truncateText) is not a function

      122 |
      123 |     test('should handle empty string', () => {
    > 124 |       const result = truncateText('', 10)
          |                                  ^
      125 |       expect(result).toBe('')
      126 |     })
      127 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:124:34)

  ● Utils Library - Real Source Code Tests › truncateText › should handle zero length

    TypeError: (0 , _utils.truncateText) is not a function

      127 |
      128 |     test('should handle zero length', () => {
    > 129 |       const result = truncateText('test', 0)
          |                                  ^
      130 |       expect(result).toBe('...')
      131 |     })
      132 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:129:34)

  ● Utils Library - Real Source Code Tests › getInitials › should get initials from full name

    TypeError: (0 , _utils.getInitials) is not a function

      134 |   describe('getInitials', () => {
      135 |     test('should get initials from full name', () => {
    > 136 |       const result = getInitials('John Doe')
          |                                 ^
      137 |       expect(result).toBe('JD')
      138 |     })
      139 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:136:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle single name

    TypeError: (0 , _utils.getInitials) is not a function

      139 |
      140 |     test('should handle single name', () => {
    > 141 |       const result = getInitials('John')
          |                                 ^
      142 |       expect(result).toBe('J')
      143 |     })
      144 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:141:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle three names

    TypeError: (0 , _utils.getInitials) is not a function

      144 |
      145 |     test('should handle three names', () => {
    > 146 |       const result = getInitials('John Michael Doe')
          |                                 ^
      147 |       expect(result).toBe('JM') // Takes first 2
      148 |     })
      149 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:146:33)

  ● Utils Library - Real Source Code Tests › getInitials › should convert to uppercase

    TypeError: (0 , _utils.getInitials) is not a function

      149 |
      150 |     test('should convert to uppercase', () => {
    > 151 |       const result = getInitials('john doe')
          |                                 ^
      152 |       expect(result).toBe('JD')
      153 |     })
      154 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:151:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle special characters

    TypeError: (0 , _utils.getInitials) is not a function

      154 |
      155 |     test('should handle special characters', () => {
    > 156 |       const result = getInitials('O\'Brien Smith')
          |                                 ^
      157 |       expect(result).toBe('OS')
      158 |     })
      159 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:156:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle empty string

    TypeError: (0 , _utils.getInitials) is not a function

      159 |
      160 |     test('should handle empty string', () => {
    > 161 |       const result = getInitials('')
          |                                 ^
      162 |       // getInitials returns '??' for empty strings as a fallback
      163 |       expect(result).toBe('??')
      164 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:161:33)

  ● Utils Library - Real Source Code Tests › generateId › should generate unique IDs

    TypeError: (0 , _utils.generateId) is not a function

      167 |   describe('generateId', () => {
      168 |     test('should generate unique IDs', () => {
    > 169 |       const id1 = generateId()
          |                             ^
      170 |       const id2 = generateId()
      171 |       expect(id1).not.toBe(id2)
      172 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:169:29)

  ● Utils Library - Real Source Code Tests › generateId › should generate string IDs

    TypeError: (0 , _utils.generateId) is not a function

      173 |
      174 |     test('should generate string IDs', () => {
    > 175 |       const id = generateId()
          |                            ^
      176 |       expect(typeof id).toBe('string')
      177 |     })
      178 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:175:28)

  ● Utils Library - Real Source Code Tests › generateId › should generate non-empty IDs

    TypeError: (0 , _utils.generateId) is not a function

      178 |
      179 |     test('should generate non-empty IDs', () => {
    > 180 |       const id = generateId()
          |                            ^
      181 |       expect(id.length).toBeGreaterThan(0)
      182 |     })
      183 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:180:28)

  ● Utils Library - Real Source Code Tests › generateId › should generate alphanumeric IDs

    TypeError: (0 , _utils.generateId) is not a function

      183 |
      184 |     test('should generate alphanumeric IDs', () => {
    > 185 |       const id = generateId()
          |                            ^
      186 |       expect(id).toMatch(/^[a-z0-9]+$/)
      187 |     })
      188 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:185:28)

  ● Utils Library - Real Source Code Tests › generateId › should generate multiple unique IDs

    TypeError: (0 , _utils.generateId) is not a function

      190 |       const ids = new Set()
      191 |       for (let i = 0; i < 100; i++) {
    > 192 |         ids.add(generateId())
          |                           ^
      193 |       }
      194 |       expect(ids.size).toBe(100) // All unique
      195 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:192:27)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate correct email

    TypeError: (0 , _utils.isValidEmail) is not a function

      198 |   describe('isValidEmail', () => {
      199 |     test('should validate correct email', () => {
    > 200 |       expect(isValidEmail('test@example.com')).toBe(true)
          |                          ^
      201 |     })
      202 |
      203 |     test('should validate email with subdomain', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:200:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate email with subdomain

    TypeError: (0 , _utils.isValidEmail) is not a function

      202 |
      203 |     test('should validate email with subdomain', () => {
    > 204 |       expect(isValidEmail('user@mail.example.com')).toBe(true)
          |                          ^
      205 |     })
      206 |
      207 |     test('should validate email with plus', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:204:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate email with plus

    TypeError: (0 , _utils.isValidEmail) is not a function

      206 |
      207 |     test('should validate email with plus', () => {
    > 208 |       expect(isValidEmail('user+tag@example.com')).toBe(true)
          |                          ^
      209 |     })
      210 |
      211 |     test('should reject email without @', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:208:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email without @

    TypeError: (0 , _utils.isValidEmail) is not a function

      210 |
      211 |     test('should reject email without @', () => {
    > 212 |       expect(isValidEmail('testexample.com')).toBe(false)
          |                          ^
      213 |     })
      214 |
      215 |     test('should reject email without domain', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:212:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email without domain

    TypeError: (0 , _utils.isValidEmail) is not a function

      214 |
      215 |     test('should reject email without domain', () => {
    > 216 |       expect(isValidEmail('test@')).toBe(false)
          |                          ^
      217 |     })
      218 |
      219 |     test('should reject email without extension', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:216:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email without extension

    TypeError: (0 , _utils.isValidEmail) is not a function

      218 |
      219 |     test('should reject email without extension', () => {
    > 220 |       expect(isValidEmail('test@example')).toBe(false)
          |                          ^
      221 |     })
      222 |
      223 |     test('should reject empty string', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:220:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject empty string

    TypeError: (0 , _utils.isValidEmail) is not a function

      222 |
      223 |     test('should reject empty string', () => {
    > 224 |       expect(isValidEmail('')).toBe(false)
          |                          ^
      225 |     })
      226 |
      227 |     test('should reject email with spaces', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:224:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email with spaces

    TypeError: (0 , _utils.isValidEmail) is not a function

      226 |
      227 |     test('should reject email with spaces', () => {
    > 228 |       expect(isValidEmail('test @example.com')).toBe(false)
          |                          ^
      229 |     })
      230 |
      231 |     test('should validate email with numbers', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:228:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate email with numbers

    TypeError: (0 , _utils.isValidEmail) is not a function

      230 |
      231 |     test('should validate email with numbers', () => {
    > 232 |       expect(isValidEmail('user123@test456.com')).toBe(true)
          |                          ^
      233 |     })
      234 |   })
      235 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:232:26)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return green for online

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      236 |   describe('getDeviceStatusColor', () => {
      237 |     test('should return green for online', () => {
    > 238 |       const result = getDeviceStatusColor('online')
          |                                          ^
      239 |       expect(result).toBe('text-green-600 bg-green-100')
      240 |     })
      241 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:238:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return gray for offline

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      241 |
      242 |     test('should return gray for offline', () => {
    > 243 |       const result = getDeviceStatusColor('offline')
          |                                          ^
      244 |       expect(result).toBe('text-gray-600 bg-gray-100')
      245 |     })
      246 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:243:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return yellow for warning

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      246 |
      247 |     test('should return yellow for warning', () => {
    > 248 |       const result = getDeviceStatusColor('warning')
          |                                          ^
      249 |       expect(result).toBe('text-yellow-600 bg-yellow-100')
      250 |     })
      251 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:248:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return red for error

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      251 |
      252 |     test('should return red for error', () => {
    > 253 |       const result = getDeviceStatusColor('error')
          |                                          ^
      254 |       expect(result).toBe('text-red-600 bg-red-100')
      255 |     })
      256 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:253:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should handle case insensitive

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      256 |
      257 |     test('should handle case insensitive', () => {
    > 258 |       const result = getDeviceStatusColor('ONLINE')
          |                                          ^
      259 |       expect(result).toBe('text-green-600 bg-green-100')
      260 |     })
      261 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:258:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return default for unknown status

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      261 |
      262 |     test('should return default for unknown status', () => {
    > 263 |       const result = getDeviceStatusColor('unknown')
          |                                          ^
      264 |       expect(result).toBe('text-gray-600 bg-gray-100')
      265 |     })
      266 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:263:42)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return blue for low

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      268 |   describe('getAlertSeverityColor', () => {
      269 |     test('should return blue for low', () => {
    > 270 |       const result = getAlertSeverityColor('low')
          |                                           ^
      271 |       expect(result).toBe('text-blue-600 bg-blue-100')
      272 |     })
      273 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:270:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return yellow for medium

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      273 |
      274 |     test('should return yellow for medium', () => {
    > 275 |       const result = getAlertSeverityColor('medium')
          |                                           ^
      276 |       expect(result).toBe('text-yellow-600 bg-yellow-100')
      277 |     })
      278 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:275:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return orange for high

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      278 |
      279 |     test('should return orange for high', () => {
    > 280 |       const result = getAlertSeverityColor('high')
          |                                           ^
      281 |       expect(result).toBe('text-orange-600 bg-orange-100')
      282 |     })
      283 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:280:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return red for critical

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      283 |
      284 |     test('should return red for critical', () => {
    > 285 |       const result = getAlertSeverityColor('critical')
          |                                           ^
      286 |       expect(result).toBe('text-red-600 bg-red-100')
      287 |     })
      288 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:285:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should handle case insensitive

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      288 |
      289 |     test('should handle case insensitive', () => {
    > 290 |       const result = getAlertSeverityColor('CRITICAL')
          |                                           ^
      291 |       expect(result).toBe('text-red-600 bg-red-100')
      292 |     })
      293 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:290:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return default for unknown severity

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      293 |
      294 |     test('should return default for unknown severity', () => {
    > 295 |       const result = getAlertSeverityColor('unknown')
          |                                           ^
      296 |       expect(result).toBe('text-gray-600 bg-gray-100')
      297 |     })
      298 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:295:43)

  ● Utils Library - Real Source Code Tests › calculateUptime › should return Unknown for null

    TypeError: (0 , _utils.calculateUptime) is not a function

      300 |   describe('calculateUptime', () => {
      301 |     test('should return Unknown for null', () => {
    > 302 |       const result = calculateUptime(null)
          |                                     ^
      303 |       expect(result).toBe('Unknown')
      304 |     })
      305 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:302:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should calculate minutes ago

    TypeError: (0 , _utils.calculateUptime) is not a function

      306 |     test('should calculate minutes ago', () => {
      307 |       const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000).toISOString()
    > 308 |       const result = calculateUptime(fiveMinutesAgo)
          |                                     ^
      309 |       expect(result).toMatch(/5m ago/)
      310 |     })
      311 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:308:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should calculate hours ago

    TypeError: (0 , _utils.calculateUptime) is not a function

      312 |     test('should calculate hours ago', () => {
      313 |       const twoHoursAgo = new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString()
    > 314 |       const result = calculateUptime(twoHoursAgo)
          |                                     ^
      315 |       expect(result).toMatch(/2h/)
      316 |     })
      317 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:314:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should calculate days ago

    TypeError: (0 , _utils.calculateUptime) is not a function

      318 |     test('should calculate days ago', () => {
      319 |       const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
    > 320 |       const result = calculateUptime(threeDaysAgo)
          |                                     ^
      321 |       expect(result).toMatch(/3d/)
      322 |     })
      323 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:320:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should handle recent activity (< 1 minute)

    TypeError: (0 , _utils.calculateUptime) is not a function

      324 |     test('should handle recent activity (< 1 minute)', () => {
      325 |       const thirtySecondsAgo = new Date(Date.now() - 30 * 1000).toISOString()
    > 326 |       const result = calculateUptime(thirtySecondsAgo)
          |                                     ^
      327 |       expect(result).toMatch(/0m ago/)
      328 |     })
      329 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:326:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should handle ISO string format

    TypeError: (0 , _utils.calculateUptime) is not a function

      330 |     test('should handle ISO string format', () => {
      331 |       const date = '2024-01-01T10:00:00.000Z'
    > 332 |       const result = calculateUptime(date)
          |                                     ^
      333 |       expect(result).toBeTruthy()
      334 |       expect(typeof result).toBe('string')
      335 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:332:37)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › truncateText should handle unicode characters

    TypeError: (0 , _utils.truncateText) is not a function

      339 |     test('truncateText should handle unicode characters', () => {
      340 |       const text = '你好世界👋'
    > 341 |       const result = truncateText(text, 3)
          |                                  ^
      342 |       expect(result.length).toBeLessThanOrEqual(6) // 3 chars + '...'
      343 |     })
      344 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:341:34)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › getInitials should handle multiple spaces

    TypeError: (0 , _utils.getInitials) is not a function

      344 |
      345 |     test('getInitials should handle multiple spaces', () => {
    > 346 |       const result = getInitials('John  Doe')
          |                                 ^
      347 |       expect(result).toBe('JD')
      348 |     })
      349 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:346:33)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › formatCurrency should handle decimal precision

    TypeError: (0 , _utils.formatCurrency) is not a function

      349 |
      350 |     test('formatCurrency should handle decimal precision', () => {
    > 351 |       const result = formatCurrency(10.999)
          |                                    ^
      352 |       expect(result).toBe('$11.00') // Rounds to 2 decimals
      353 |     })
      354 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:351:36)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › isValidEmail should handle edge case emails

    TypeError: (0 , _utils.isValidEmail) is not a function

      354 |
      355 |     test('isValidEmail should handle edge case emails', () => {
    > 356 |       expect(isValidEmail('a@b.co')).toBe(true) // Short valid email
          |                          ^
      357 |       expect(isValidEmail('test..email@example.com')).toBe(true) // Double dot (technically invalid but regex allows)
      358 |     })
      359 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:356:26)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › generateId should not contain special characters

    TypeError: (0 , _utils.generateId) is not a function

      359 |
      360 |     test('generateId should not contain special characters', () => {
    > 361 |       const id = generateId()
          |                            ^
      362 |       expect(id).not.toMatch(/[^a-z0-9]/)
      363 |     })
      364 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:361:28)

  ● Utils Library - Real Source Code Tests › Integration Tests › should format and truncate text together

    TypeError: (0 , _utils.truncateText) is not a function

      367 |     test('should format and truncate text together', () => {
      368 |       const longText = 'This is a very long device name that needs formatting'
    > 369 |       const truncated = truncateText(longText, 20)
          |                                     ^
      370 |       expect(truncated).toMatch(/\.\.\./)
      371 |       expect(truncated.length).toBeLessThanOrEqual(23)
      372 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:369:37)

  ● Utils Library - Real Source Code Tests › Integration Tests › should get initials and validate email

    TypeError: (0 , _utils.isValidEmail) is not a function

      376 |       const name = 'John Doe'
      377 |       
    > 378 |       expect(isValidEmail(email)).toBe(true)
          |                          ^
      379 |       expect(getInitials(name)).toBe('JD')
      380 |     })
      381 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:378:26)

  ● Utils Library - Real Source Code Tests › Integration Tests › should handle device status and alert severity together

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      381 |
      382 |     test('should handle device status and alert severity together', () => {
    > 383 |       const deviceStatus = getDeviceStatusColor('error')
          |                                                ^
      384 |       const alertSeverity = getAlertSeverityColor('critical')
      385 |       
      386 |       expect(deviceStatus).toContain('red')

      at Object.<anonymous> (__tests__/lib/utils.test.ts:383:48)

  ● Utils Library - Real Source Code Tests › Performance Tests › should generate 1000 IDs quickly

    TypeError: (0 , _utils.generateId) is not a function

      393 |       const start = Date.now()
      394 |       for (let i = 0; i < 1000; i++) {
    > 395 |         generateId()
          |                   ^
      396 |       }
      397 |       const duration = Date.now() - start
      398 |       expect(duration).toBeLessThan(100) // Should be very fast

      at Object.<anonymous> (__tests__/lib/utils.test.ts:395:19)

  ● Utils Library - Real Source Code Tests › Performance Tests › should validate 1000 emails quickly

    TypeError: (0 , _utils.isValidEmail) is not a function

      402 |       const start = Date.now()
      403 |       for (let i = 0; i < 1000; i++) {
    > 404 |         isValidEmail(`user${i}@example.com`)
          |                     ^
      405 |       }
      406 |       const duration = Date.now() - start
      407 |       expect(duration).toBeLessThan(50)

      at Object.<anonymous> (__tests__/lib/utils.test.ts:404:21)

  ● Utils Library - Real Source Code Tests › Performance Tests › should truncate 1000 texts quickly

    TypeError: (0 , _utils.truncateText) is not a function

      412 |       const text = 'This is a long text that needs to be truncated'
      413 |       for (let i = 0; i < 1000; i++) {
    > 414 |         truncateText(text, 20)
          |                     ^
      415 |       }
      416 |       const duration = Date.now() - start
      417 |       expect(duration).toBeLessThan(50)

      at Object.<anonymous> (__tests__/lib/utils.test.ts:414:21)

PASS __tests__/all-issues.test.tsx
  GitHub Issues - All Fixes Validation
    Issue #23: Login Redirect (CRITICAL)
      ✓ should redirect to dashboard after successful login (1 ms)
    Issue #24: Locations Card on Dashboard (HIGH)
      ✓ LocationsCard renders with View All button
      ✓ View All button navigates to locations page (1 ms)
    Issue #25: Profile Save Button (HIGH)
      ✓ saves profile data successfully
      ✓ shows toast notification on success
      ✓ shows toast notification on error
    Issue #26: Change Password Form (HIGH)
      ✓ Change Password form renders (1 ms)
      ✓ validates password fields
      ✓ updates password successfully
    Issue #27: Organization Members Tab (HIGH)
      ✓ Members tab is visible
      ✓ Members tab content loads (1 ms)
    Issue #28: Organization Locations Tab (HIGH)
      ✓ Locations tab is visible
      ✓ Locations tab is functional
    Issue #29: Theme Selector (MEDIUM)
      ✓ theme selector has Light option
      ✓ theme selector has Dark option
      ✓ theme selector has System option
      ✓ theme changes are applied immediately (1 ms)
      ✓ theme preference persists
    Issue #30: Preferences Dropdowns (MEDIUM)
      ✓ language dropdown renders
      ✓ timezone dropdown renders (1 ms)
      ✓ date format dropdown renders
      ✓ time format dropdown renders (1 ms)
      ✓ dropdowns have correct options (2 ms)
    Issue #31: Preferences Save Button (MEDIUM)
      ✓ save button is functional
      ✓ saves preferences to Supabase (1 ms)
      ✓ shows success toast on save
      ✓ shows error toast on failure (1 ms)
    Issue #32: Active Sessions (MEDIUM)
      ✓ Active Sessions section renders
      ✓ displays current session
      ✓ current session has "Current" badge (1 ms)
      ✓ can revoke non-current sessions
      ✓ shows toast on session revoke
    Issue #33: Two-Factor Authentication (MEDIUM)
      ✓ 2FA section renders
      ✓ 2FA toggle switch works
      ✓ shows setup instructions when enabled
      ✓ QR code button displays
      ✓ Setup key button displays
    Issue #34: API Keys (MEDIUM)
      ✓ API Keys section renders
      ✓ Create New Key button works
      ✓ API key displays after creation
      ✓ can copy API key to clipboard (1 ms)
      ✓ can revoke API key
      ✓ shows toast notifications
    Issue #35: Organization Devices Tab (MEDIUM)
      ✓ Devices tab is visible in organization page (1 ms)
      ✓ Devices tab loads content
    Issue #36: Organization Integrations Tab (MEDIUM)
      ✓ Integrations tab is visible
      ✓ Integrations tab loads content
    Issue #37: Add Device Button (MEDIUM)
      ✓ Add Device button renders
      ✓ clicking button opens dialog (1 ms)
      ✓ dialog has device name field
      ✓ dialog has device ID field
      ✓ validates required fields (1 ms)
      ✓ shows success toast on creation
      ✓ dialog closes after creation
    Issue #38: Organizations Link in Navigation (MEDIUM)
      ✓ Organizations link is visible in sidebar
      ✓ Organizations link has correct path (1 ms)
      ✓ Organizations link has icon (4 ms)
      ✓ clicking link navigates to organizations page (1 ms)
      ✓ active state highlights correctly
    Issue #39: View All Links on Dashboard Cards (LOW)
      ✓ Devices card is clickable
      ✓ Devices card navigates to devices page
      ✓ Alerts card is clickable
      ✓ Alerts card navigates to alerts page
      ✓ Team Members card is clickable
      ✓ Team Members card navigates to organizations page
      ✓ LocationsCard has View All button
      ✓ LocationsCard View All navigates to locations page (1 ms)
  Integration Tests - Complete User Journeys
    Authentication Flow
      ✓ complete login to dashboard flow
    Profile Update Flow
      ✓ complete profile update flow
    Organization Management Flow
      ✓ complete organization navigation flow
    Device Management Flow
      ✓ complete add device flow (1 ms)
    Security Settings Flow
      ✓ complete password change flow
      ✓ complete 2FA setup flow
      ✓ complete API key creation flow
    Preferences Flow
      ✓ complete theme change flow
  Accessibility Tests
    ✓ all buttons have accessible labels (1 ms)
    ✓ all form fields have labels
    ✓ keyboard navigation works
    ✓ screen reader support
  Performance Tests
    ✓ dashboard loads within 2 seconds (1 ms)
    ✓ navigation is instant
    ✓ toast notifications don't block UI
  Regression Tests
    ✓ existing features still work
    ✓ no broken links
    ✓ no console errors (1 ms)

FAIL __tests__/components/ui/comprehensive-ui.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/comprehensive-ui.test.tsx

       8 |
       9 | // Import all UI components
    > 10 | import { Textarea } from '@/components/ui/textarea'
         |                 ^
      11 | import { Switch } from '@/components/ui/switch'
      12 | import { Progress } from '@/components/ui/progress'
      13 | import { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/comprehensive-ui.test.tsx:10:17)

PASS __tests__/api/api-helpers.test.ts
  Form Validation - Device Configuration
    ✓ validates valid device form (1 ms)
    ✓ rejects empty device name (2 ms)
    ✓ rejects missing device type (1 ms)
    ✓ rejects name exceeding max length
  Form Validation - User Registration
    ✓ validates valid user registration (2 ms)
    ✓ rejects invalid email (1 ms)
    ✓ rejects short password
    ✓ rejects mismatched passwords (1 ms)
  API Response Handling
    ✓ handles successful API response
    ✓ handles API error response (5 ms)
    ✓ extracts error message from response (1 ms)
  HTTP Status Code Helpers
    ✓ identifies success status codes (4 ms)
    ✓ identifies client error status codes
    ✓ identifies server error status codes (10 ms)
  Query String Building
    ✓ builds query string from object (1 ms)
    ✓ handles empty params
    ✓ filters out null and undefined (1 ms)
    ✓ encodes special characters (3 ms)
  Error Message Formatting
    ✓ formats string errors
    ✓ formats Error objects
    ✓ formats object with message property
    ✓ handles unknown error types (5 ms)
  Retry Logic
    ✓ retries failed operations
    ✓ throws after max attempts (14 ms)
  Request Timeout
    ✓ times out long-running requests (1001 ms)

PASS __tests__/lib/telemetry-utils.test.ts
  extractMetricValue
    Flat key format
      ✓ extracts temperature from flat key (1 ms)
      ✓ extracts humidity from flat key
      ✓ extracts pressure from flat key (1 ms)
      ✓ extracts battery from flat key
      ✓ handles string numbers
    Golioth sensor type format
      ✓ extracts temperature using type ID
      ✓ extracts humidity using type ID (1 ms)
      ✓ extracts pressure using type ID
      ✓ extracts battery using type ID
      ✓ extracts CO2 using type ID
      ✓ extracts TVOC using type ID (1 ms)
      ✓ extracts light using type ID
      ✓ extracts motion using type ID
    Golioth sensor name format
      ✓ extracts temperature using sensor name (1 ms)
      ✓ extracts temperature using full sensor name
      ✓ extracts humidity using sensor name
      ✓ extracts battery using sensor name (1 ms)
      ✓ handles case insensitive sensor names
    Nested env format
      ✓ extracts temperature from env object (1 ms)
      ✓ extracts temperature using full name in env
      ✓ extracts humidity from env object
      ✓ extracts multiple metrics from env (1 ms)
    Alternative flat key aliases
      ✓ extracts temperature using "temp" alias (1 ms)
      ✓ extracts humidity using "hum" alias
      ✓ extracts battery using "bat" alias
      ✓ extracts battery using "battery_level" alias (1 ms)
      ✓ extracts rssi using "signal_strength" alias
    Priority and fallback logic
      ✓ prefers direct flat key over aliases (1 ms)
      ✓ falls back to alias if direct key not found
      ✓ prefers Golioth format when type and value present (1 ms)
    Error handling and edge cases
      ✓ returns null for null telemetry
      ✓ returns null for undefined telemetry (1 ms)
      ✓ returns null for empty object
      ✓ returns null for non-existent metric
      ✓ handles NaN values
      ✓ handles null values
      ✓ handles undefined values
      ✓ handles zero values correctly
      ✓ handles negative values correctly (1 ms)
    Complex real-world scenarios
      ✓ extracts from mixed Golioth and flat format (1 ms)
      ✓ extracts from nested env with multiple readings
  METRIC_TO_SENSOR_TYPE constant
    ✓ defines type IDs for all metrics (2 ms)
    ✓ RSSI has empty array (no specific type ID)
  METRIC_TO_SENSOR_NAMES constant
    ✓ defines aliases for all metrics (7 ms)

FAIL __tests__/components/ui/button.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/button.test.tsx

       8 | import { Button, buttonVariants } from '@/components/ui/button'
       9 |
    > 10 | describe('Button Component - Real Source Code Tests', () => {
         |                 ^
      11 |   describe('Basic Rendering', () => {
      12 |     test('should render button with text', () => {
      13 |       render(<Button>Click me</Button>)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/button.test.tsx:10:17)

FAIL __tests__/components/ui/input.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/input.test.tsx

       7 | import { Input } from '@/components/ui/input'
       8 |
    >  9 | describe('Input Component - Real Source Code Tests', () => {
         |                 ^
      10 |   describe('Basic Rendering', () => {
      11 |     test('should render input element', () => {
      12 |       const { container } = render(<Input />)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/input.test.tsx:9:17)

FAIL __tests__/lib/api-error-handler.test.ts
  handleApiError
    Successful responses
      ✕ returns no error for 200 OK (1 ms)
      ✕ returns no error for 201 Created (1 ms)
      ✕ returns no error for 204 No Content
    Authentication errors
      ✕ identifies 401 Unauthorized as auth error
      ✕ identifies 403 Forbidden as auth error (1 ms)
      ✕ silently handles auth errors by default
      ✕ can throw auth errors if configured (1 ms)
    Client errors (4xx)
      ✕ identifies 400 Bad Request as error
      ✕ identifies 404 Not Found as error
      ✕ identifies 422 Unprocessable Entity as error (1 ms)
    Server errors (5xx)
      ✕ identifies 500 Internal Server Error and marks as retryable
      ✕ identifies 502 Bad Gateway and marks as retryable
      ✕ identifies 503 Service Unavailable and marks as retryable (1 ms)
    Throw behavior
      ✕ throws error when throwOnError is true
      ✕ does not throw when throwOnError is false
      ✕ includes custom error prefix in thrown error
    Logging behavior
      ✕ logs errors when logErrors is true
      ✕ does not log when logErrors is false (1 ms)
      ✕ logs auth errors to console.log instead of console.error
  isRetryableError
    ✕ returns true for 500 errors
    ✕ returns true for 502 errors
    ✕ returns true for 503 errors (1 ms)
    ✕ returns true for 504 errors
    ✕ returns false for 4xx errors (1 ms)
    ✕ returns false for 2xx success
    ✕ returns false for auth errors
  formatApiError
    ✕ formats error with status and message
    ✕ handles missing error prefix
    ✕ formats auth errors differently (1 ms)
  Edge cases and integration
    ✕ handles malformed Response objects gracefully
    ✕ handles custom status codes (1 ms)
    ✕ combines all options correctly

  ● handleApiError › Successful responses › returns no error for 200 OK

    ReferenceError: Response is not defined

      10 |   describe('Successful responses', () => {
      11 |     test('returns no error for 200 OK', () => {
    > 12 |       const response = new Response(null, { status: 200, statusText: 'OK' })
         |                        ^
      13 |       const result = handleApiError(response, { throwOnError: false })
      14 |       
      15 |       expect(result.isError).toBe(false)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:12:24)

  ● handleApiError › Successful responses › returns no error for 201 Created

    ReferenceError: Response is not defined

      19 |
      20 |     test('returns no error for 201 Created', () => {
    > 21 |       const response = new Response(null, { status: 201, statusText: 'Created' })
         |                        ^
      22 |       const result = handleApiError(response, { throwOnError: false })
      23 |       
      24 |       expect(result.isError).toBe(false)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:21:24)

  ● handleApiError › Successful responses › returns no error for 204 No Content

    ReferenceError: Response is not defined

      27 |
      28 |     test('returns no error for 204 No Content', () => {
    > 29 |       const response = new Response(null, { status: 204, statusText: 'No Content' })
         |                        ^
      30 |       const result = handleApiError(response, { throwOnError: false })
      31 |       
      32 |       expect(result.isError).toBe(false)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:29:24)

  ● handleApiError › Authentication errors › identifies 401 Unauthorized as auth error

    ReferenceError: Response is not defined

      37 |   describe('Authentication errors', () => {
      38 |     test('identifies 401 Unauthorized as auth error', () => {
    > 39 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
         |                        ^
      40 |       const result = handleApiError(response, { throwOnError: false })
      41 |       
      42 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:39:24)

  ● handleApiError › Authentication errors › identifies 403 Forbidden as auth error

    ReferenceError: Response is not defined

      46 |
      47 |     test('identifies 403 Forbidden as auth error', () => {
    > 48 |       const response = new Response(null, { status: 403, statusText: 'Forbidden' })
         |                        ^
      49 |       const result = handleApiError(response, { throwOnError: false })
      50 |       
      51 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:48:24)

  ● handleApiError › Authentication errors › silently handles auth errors by default

    ReferenceError: Response is not defined

      55 |
      56 |     test('silently handles auth errors by default', () => {
    > 57 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
         |                        ^
      58 |       
      59 |       // Should not throw even though throwOnError is true
      60 |       expect(() => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:57:24)

  ● handleApiError › Authentication errors › can throw auth errors if configured

    ReferenceError: Response is not defined

      64 |
      65 |     test('can throw auth errors if configured', () => {
    > 66 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
         |                        ^
      67 |       
      68 |       expect(() => {
      69 |         handleApiError(response, { throwOnError: true, silentAuthErrors: false })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:66:24)

  ● handleApiError › Client errors (4xx) › identifies 400 Bad Request as error

    ReferenceError: Response is not defined

      74 |   describe('Client errors (4xx)', () => {
      75 |     test('identifies 400 Bad Request as error', () => {
    > 76 |       const response = new Response(null, { status: 400, statusText: 'Bad Request' })
         |                        ^
      77 |       const result = handleApiError(response, { throwOnError: false })
      78 |       
      79 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:76:24)

  ● handleApiError › Client errors (4xx) › identifies 404 Not Found as error

    ReferenceError: Response is not defined

      84 |
      85 |     test('identifies 404 Not Found as error', () => {
    > 86 |       const response = new Response(null, { status: 404, statusText: 'Not Found' })
         |                        ^
      87 |       const result = handleApiError(response, { throwOnError: false })
      88 |       
      89 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:86:24)

  ● handleApiError › Client errors (4xx) › identifies 422 Unprocessable Entity as error

    ReferenceError: Response is not defined

      93 |
      94 |     test('identifies 422 Unprocessable Entity as error', () => {
    > 95 |       const response = new Response(null, { status: 422, statusText: 'Unprocessable Entity' })
         |                        ^
      96 |       const result = handleApiError(response, { throwOnError: false })
      97 |       
      98 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:95:24)

  ● handleApiError › Server errors (5xx) › identifies 500 Internal Server Error and marks as retryable

    ReferenceError: Response is not defined

      103 |   describe('Server errors (5xx)', () => {
      104 |     test('identifies 500 Internal Server Error and marks as retryable', () => {
    > 105 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      106 |       const result = handleApiError(response, { throwOnError: false })
      107 |       
      108 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:105:24)

  ● handleApiError › Server errors (5xx) › identifies 502 Bad Gateway and marks as retryable

    ReferenceError: Response is not defined

      113 |
      114 |     test('identifies 502 Bad Gateway and marks as retryable', () => {
    > 115 |       const response = new Response(null, { status: 502, statusText: 'Bad Gateway' })
          |                        ^
      116 |       const result = handleApiError(response, { throwOnError: false })
      117 |       
      118 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:115:24)

  ● handleApiError › Server errors (5xx) › identifies 503 Service Unavailable and marks as retryable

    ReferenceError: Response is not defined

      121 |
      122 |     test('identifies 503 Service Unavailable and marks as retryable', () => {
    > 123 |       const response = new Response(null, { status: 503, statusText: 'Service Unavailable' })
          |                        ^
      124 |       const result = handleApiError(response, { throwOnError: false })
      125 |       
      126 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:123:24)

  ● handleApiError › Throw behavior › throws error when throwOnError is true

    ReferenceError: Response is not defined

      131 |   describe('Throw behavior', () => {
      132 |     test('throws error when throwOnError is true', () => {
    > 133 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      134 |       
      135 |       expect(() => {
      136 |         handleApiError(response, { throwOnError: true })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:133:24)

  ● handleApiError › Throw behavior › does not throw when throwOnError is false

    ReferenceError: Response is not defined

      139 |
      140 |     test('does not throw when throwOnError is false', () => {
    > 141 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      142 |       
      143 |       expect(() => {
      144 |         handleApiError(response, { throwOnError: false })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:141:24)

  ● handleApiError › Throw behavior › includes custom error prefix in thrown error

    ReferenceError: Response is not defined

      147 |
      148 |     test('includes custom error prefix in thrown error', () => {
    > 149 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      150 |       
      151 |       expect(() => {
      152 |         handleApiError(response, {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:149:24)

  ● handleApiError › Logging behavior › logs errors when logErrors is true

    ReferenceError: Response is not defined

      173 |
      174 |     test('logs errors when logErrors is true', () => {
    > 175 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      176 |       
      177 |       handleApiError(response, { throwOnError: false, logErrors: true })
      178 |       

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:175:24)

  ● handleApiError › Logging behavior › does not log when logErrors is false

    ReferenceError: Response is not defined

      181 |
      182 |     test('does not log when logErrors is false', () => {
    > 183 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      184 |       
      185 |       handleApiError(response, { throwOnError: false, logErrors: false })
      186 |       

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:183:24)

  ● handleApiError › Logging behavior › logs auth errors to console.log instead of console.error

    ReferenceError: Response is not defined

      190 |
      191 |     test('logs auth errors to console.log instead of console.error', () => {
    > 192 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
          |                        ^
      193 |       
      194 |       handleApiError(response, { throwOnError: false, logErrors: true })
      195 |       

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:192:24)

  ● isRetryableError › returns true for 500 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      202 | describe('isRetryableError', () => {
      203 |   test('returns true for 500 errors', () => {
    > 204 |     expect(isRetryableError(500)).toBe(true)
          |                            ^
      205 |   })
      206 |
      207 |   test('returns true for 502 errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:204:28)

  ● isRetryableError › returns true for 502 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      206 |
      207 |   test('returns true for 502 errors', () => {
    > 208 |     expect(isRetryableError(502)).toBe(true)
          |                            ^
      209 |   })
      210 |
      211 |   test('returns true for 503 errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:208:28)

  ● isRetryableError › returns true for 503 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      210 |
      211 |   test('returns true for 503 errors', () => {
    > 212 |     expect(isRetryableError(503)).toBe(true)
          |                            ^
      213 |   })
      214 |
      215 |   test('returns true for 504 errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:212:28)

  ● isRetryableError › returns true for 504 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      214 |
      215 |   test('returns true for 504 errors', () => {
    > 216 |     expect(isRetryableError(504)).toBe(true)
          |                            ^
      217 |   })
      218 |
      219 |   test('returns false for 4xx errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:216:28)

  ● isRetryableError › returns false for 4xx errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      218 |
      219 |   test('returns false for 4xx errors', () => {
    > 220 |     expect(isRetryableError(400)).toBe(false)
          |                            ^
      221 |     expect(isRetryableError(404)).toBe(false)
      222 |     expect(isRetryableError(422)).toBe(false)
      223 |   })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:220:28)

  ● isRetryableError › returns false for 2xx success

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      224 |
      225 |   test('returns false for 2xx success', () => {
    > 226 |     expect(isRetryableError(200)).toBe(false)
          |                            ^
      227 |     expect(isRetryableError(201)).toBe(false)
      228 |   })
      229 |

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:226:28)

  ● isRetryableError › returns false for auth errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      229 |
      230 |   test('returns false for auth errors', () => {
    > 231 |     expect(isRetryableError(401)).toBe(false)
          |                            ^
      232 |     expect(isRetryableError(403)).toBe(false)
      233 |   })
      234 | })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:231:28)

  ● formatApiError › formats error with status and message

    TypeError: (0 , _apierrorhandler.formatApiError) is not a function

      236 | describe('formatApiError', () => {
      237 |   test('formats error with status and message', () => {
    > 238 |     const result = formatApiError(500, 'Internal Server Error', 'Failed to fetch data')
          |                                  ^
      239 |     
      240 |     expect(result).toContain('500')
      241 |     expect(result).toContain('Internal Server Error')

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:238:34)

  ● formatApiError › handles missing error prefix

    TypeError: (0 , _apierrorhandler.formatApiError) is not a function

      244 |
      245 |   test('handles missing error prefix', () => {
    > 246 |     const result = formatApiError(404, 'Not Found')
          |                                  ^
      247 |     
      248 |     expect(result).toContain('404')
      249 |     expect(result).toContain('Not Found')

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:246:34)

  ● formatApiError › formats auth errors differently

    TypeError: (0 , _apierrorhandler.formatApiError) is not a function

      251 |
      252 |   test('formats auth errors differently', () => {
    > 253 |     const result = formatApiError(401, 'Unauthorized', 'Access denied')
          |                                  ^
      254 |     
      255 |     expect(typeof result).toBe('string')
      256 |     expect(result.length).toBeGreaterThan(0)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:253:34)

  ● Edge cases and integration › handles malformed Response objects gracefully

    ReferenceError: Response is not defined

      260 | describe('Edge cases and integration', () => {
      261 |   test('handles malformed Response objects gracefully', () => {
    > 262 |     const response = new Response(null, { status: undefined as any })
          |                      ^
      263 |     
      264 |     expect(() => {
      265 |       handleApiError(response, { throwOnError: false })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:262:22)

  ● Edge cases and integration › handles custom status codes

    ReferenceError: Response is not defined

      268 |
      269 |   test('handles custom status codes', () => {
    > 270 |     const response = new Response(null, { status: 418, statusText: "I'm a teapot" })
          |                      ^
      271 |     const result = handleApiError(response, { throwOnError: false })
      272 |     
      273 |     expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:270:22)

  ● Edge cases and integration › combines all options correctly

    ReferenceError: Response is not defined

      276 |
      277 |   test('combines all options correctly', () => {
    > 278 |     const response = new Response(null, { status: 500, statusText: 'Error' })
          |                      ^
      279 |     
      280 |     const result = handleApiError(response, {
      281 |       throwOnError: false,

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:278:22)

FAIL __tests__/auth/login-redirect.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/auth/login-redirect.test.tsx

      16 |
      17 | // Mock Supabase client
    > 18 | jest.mock('@/lib/supabase/client', () => ({
         |                ^
      19 |   createClient: jest.fn(),
      20 | }))
      21 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/auth/login-redirect.test.tsx:18:16)

PASS __tests__/analytics/analytics-comprehensive.test.tsx
  Analytics - Device Status Distribution
    ✓ calculates device status percentages correctly
    ✓ handles empty device list
    ✓ calculates status counts correctly (1 ms)
  Analytics - Alert Severity Distribution
    ✓ calculates alert severity counts (1 ms)
    ✓ calculates critical alert percentage
  Analytics - Time Series Data
    ✓ aggregates data by hour (1 ms)
    ✓ calculates average values
    ✓ finds min and max values (1 ms)
  Analytics - Device Uptime Calculation
    ✓ calculates uptime percentage
    ✓ handles 100% uptime (1 ms)
    ✓ handles 0% uptime (1 ms)
  Analytics - Data Aggregation
    ✓ groups data by device (1 ms)
    ✓ calculates total readings per device
  Dashboard - Statistics Cards
    ✓ formats large numbers with suffixes
    ✓ calculates percentage change (1 ms)
    ✓ determines trend direction (12 ms)
  Reports - Data Export
    ✓ converts data to CSV format (1 ms)
    ✓ escapes commas in CSV data (3 ms)
  Date Formatting Utilities
    ✓ formats date to ISO string
    ✓ calculates days ago
    ✓ formats relative time

PASS __tests__/github-issues/issue-41-page-title-css.test.tsx
  Issue #41 - Page Title Alignment
    PageHeader Component Consistency
      ✓ all pages use consistent left padding (1 ms)
      ✓ page titles do not touch left sidebar (1 ms)
      ✓ page container maintains consistent margins
    Responsive Layout
      ✓ title alignment works on mobile (< 768px)
      ✓ title alignment works on tablet (768px - 1024px)
      ✓ title alignment works on desktop (> 1024px) (1 ms)
    Visual Regression Tests
      ✓ Dashboard page title alignment (2 ms)
      ✓ Devices page title alignment (working reference)
      ✓ Organizations page title alignment
      ✓ Settings page title alignment
    CSS Class Validation
      ✓ validates Tailwind padding classes (1 ms)
      ✓ validates consistent spacing units
    Browser Compatibility
      ✓ padding works in MS Edge (1 ms)
      ✓ Tailwind classes compile correctly
      ✓ flexbox layout consistent across browsers
    Layout Structure Validation
      ✓ page structure: sidebar + main content
      ✓ PageHeader is direct child of main content area (1 ms)
      ✓ no conflicting margin/padding on parent containers
    Fix Validation
      ✓ before fix: inconsistent padding causes misalignment
      ✓ after fix: all pages have consistent padding
      ✓ fix should not affect vertical alignment (1 ms)
    Regression Prevention
      ✓ creating new pages should use consistent padding
      ✓ PageHeader component should not have default padding (1 ms)
    Accessibility
      ✓ sufficient spacing for readability
      ✓ touch target size not affected by padding (1 ms)

PASS __tests__/device-types-sort-filter.test.ts
  Device Types Sorting and Filtering
    Sort by Name
      ✓ should sort by name ascending (1 ms)
      ✓ should sort by name descending (1 ms)
    Sort by Device Class
      ✓ should sort by device_class ascending
      ✓ should sort by device_class descending (1 ms)
    Sort by Unit
      ✓ should sort by unit ascending (consistent ordering) (1 ms)
      ✓ should sort by unit descending (reverse ordering)
    Filter by Device Class
      ✓ should filter by single device class (1 ms)
      ✓ should return all items when device class filter is null
      ✓ should return empty array when no matching device class (1 ms)
    Filter by Unit
      ✓ should filter by single unit
      ✓ should return all items when unit filter is null (1 ms)
      ✓ should return empty array when no matching unit (1 ms)
      ✓ should filter multiple device types by same unit
    Combined Sort and Filter
      ✓ should filter by device class then sort by name (1 ms)
      ✓ should apply both device class and unit filters
      ✓ should return empty when combined filters have no matches
    Edge Cases
      ✓ should handle empty array
      ✓ should handle single item (1 ms)
      ✓ should extract unique device classes
      ✓ should extract unique units (1 ms)

FAIL __tests__/components/devices-comprehensive.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/devices-comprehensive.test.tsx

      51 | describe('DevicesHeader', () => {
      52 |   const mockOnNewDevice = jest.fn()
    > 53 |   const mockOnRefresh = jest.fn()
         |                ^
      54 |
      55 |   beforeEach(() => {
      56 |     jest.clearAllMocks()

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/devices-comprehensive.test.tsx:53:16)

FAIL tests/integration/conflict-detector.integration.test.ts
  ConflictDetector - Integration Tests
    detectConflicts
      ✕ should detect field-level conflicts
    resolveConflicts
      ✕ should auto-resolve safe conflicts
      ✕ should queue manual conflicts to database
      ✕ should merge arrays correctly
    conflict resolution workflow
      ✕ should handle full conflict resolution cycle

  ● ConflictDetector - Integration Tests › detectConflicts › should detect field-level conflicts

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › resolveConflicts › should auto-resolve safe conflicts

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › resolveConflicts › should queue manual conflicts to database

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › resolveConflicts › should merge arrays correctly

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › conflict resolution workflow › should handle full conflict resolution cycle

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

FAIL __tests__/lib/format-date.test.ts
  formatDateTime
    ✓ formats date-time with default options (1 ms)
    ✓ formats date-time with 12h format (1 ms)
    ✓ formats date-time with 24h format
    ✓ formats with different date formats (1 ms)
    ✓ handles string dates
    ✓ handles timestamp numbers (1 ms)
    ✓ handles invalid dates gracefully
    ✓ formats with different languages (2 ms)
  formatDateOnly
    ✓ formats date without time
    ✓ formats with MM/DD/YYYY format (1 ms)
    ✓ formats with DD/MM/YYYY format (1 ms)
    ✓ formats with YYYY-MM-DD format
    ✓ handles invalid dates
    ✓ handles different languages (2 ms)
  formatTimeOnly
    ✓ formats time without date
    ✓ formats with 12-hour format (1 ms)
    ✓ formats with 24-hour format
    ✓ handles invalid dates
  formatRelativeTime
    ✕ formats "just now" for recent times
    ✕ formats minutes ago (1 ms)
    ✕ formats hours ago
    ✕ formats days ago
    ✕ handles invalid dates
    ✕ handles null
  formatDuration
    ✓ formats duration in seconds under a minute (1 ms)
    ✓ formats duration in minutes
    ✓ formats duration in hours
    ✓ formats duration in days
    ✓ handles zero duration (1 ms)
    ✓ handles negative durations
  formatISODate
    ✕ formats dates to ISO 8601
    ✕ handles string input
    ✕ handles timestamp input (1 ms)
  Edge Cases and Error Handling
    ✓ handles null gracefully
    ✓ handles undefined gracefully
    ✓ handles empty string gracefully

  ● formatRelativeTime › formats "just now" for recent times

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      137 |   test('formats "just now" for recent times', () => {
      138 |     const now = new Date()
    > 139 |     const result = formatRelativeTime(now.toISOString())
          |                                      ^
      140 |     expect(result).toBeTruthy()
      141 |   })
      142 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:139:38)

  ● formatRelativeTime › formats minutes ago

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      143 |   test('formats minutes ago', () => {
      144 |     const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000)
    > 145 |     const result = formatRelativeTime(fiveMinutesAgo.toISOString())
          |                                      ^
      146 |     expect(result).toBeTruthy()
      147 |   })
      148 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:145:38)

  ● formatRelativeTime › formats hours ago

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      149 |   test('formats hours ago', () => {
      150 |     const twoHoursAgo = new Date(Date.now() - 2 * 60 * 60 * 1000)
    > 151 |     const result = formatRelativeTime(twoHoursAgo.toISOString())
          |                                      ^
      152 |     expect(result).toBeTruthy()
      153 |   })
      154 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:151:38)

  ● formatRelativeTime › formats days ago

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      155 |   test('formats days ago', () => {
      156 |     const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000)
    > 157 |     const result = formatRelativeTime(threeDaysAgo.toISOString())
          |                                      ^
      158 |     expect(result).toBeTruthy()
      159 |   })
      160 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:157:38)

  ● formatRelativeTime › handles invalid dates

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      160 |
      161 |   test('handles invalid dates', () => {
    > 162 |     const result = formatRelativeTime('invalid')
          |                                      ^
      163 |     expect(result).toBe('N/A')
      164 |   })
      165 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:162:38)

  ● formatRelativeTime › handles null

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      165 |
      166 |   test('handles null', () => {
    > 167 |     const result = formatRelativeTime(null as any)
          |                                      ^
      168 |     expect(result).toBe('N/A')
      169 |   })
      170 | })

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:167:38)

  ● formatISODate › formats dates to ISO 8601

    TypeError: (0 , _formatdate.formatISODate) is not a function

      206 |   test('formats dates to ISO 8601', () => {
      207 |     const date = new Date('2026-02-19T15:30:45Z')
    > 208 |     const result = formatISODate(date)
          |                                 ^
      209 |     expect(result).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
      210 |   })
      211 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:208:33)

  ● formatISODate › handles string input

    TypeError: (0 , _formatdate.formatISODate) is not a function

      211 |
      212 |   test('handles string input', () => {
    > 213 |     const result = formatISODate('2026-02-19T15:30:45Z')
          |                                 ^
      214 |     expect(result).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
      215 |   })
      216 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:213:33)

  ● formatISODate › handles timestamp input

    TypeError: (0 , _formatdate.formatISODate) is not a function

      217 |   test('handles timestamp input', () => {
      218 |     const timestamp = Date.now()
    > 219 |     const result = formatISODate(timestamp)
          |                                 ^
      220 |     expect(result).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
      221 |   })
      222 | })

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:219:33)

FAIL __tests__/components/ui/badge.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/badge.test.tsx

       8 | import { Badge, badgeVariants } from '@/components/ui/badge'
       9 |
    > 10 | describe('Badge Component - Real Source Code Tests', () => {
         |                 ^
      11 |   describe('Basic Rendering', () => {
      12 |     test('should render badge with text', () => {
      13 |       render(<Badge>Test Badge</Badge>)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/badge.test.tsx:10:17)

PASS __tests__/critical-issues/issue-103-device-sorting.test.tsx
  Issue #103: Device Sorting Priority
    Status Priority Mapping
      ✓ should define correct status priority order (1 ms)
      ✓ should handle unknown status with lowest priority
    Device Sorting Logic
      ✓ should sort devices by status priority (online first) (1 ms)
      ✓ should maintain secondary sort by name for same status (1 ms)
      ✓ should handle mixed status with secondary name sorting (1 ms)
    Default Sort Configuration
      ✓ should default sortBy to "status" not "name"
      ✓ should default sortOrder to "asc" (1 ms)
    Edge Cases
      ✓ should handle empty device list (2 ms)
      ✓ should handle single device
      ✓ should handle all devices with same status (1 ms)

FAIL __tests__/components/client-components.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/client-components.test.tsx

      112 |     const { container } = render(<SystemStatsCard />)
      113 |     await waitFor(() => expect(container).toBeTruthy())
    > 114 |   })
          |     ^
      115 |
      116 |   test('DashboardOverview renders', async () => {
      117 |     const { DashboardOverview } = await import('@/components/dashboard/DashboardOverview')

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/client-components.test.tsx:114:17)

FAIL __tests__/components/ui/label-card-alert.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/label-card-alert.test.tsx

       7 | import { Label } from '@/components/ui/label'
       8 | import { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from '@/components/ui/card'
    >  9 | import { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert'
         |                 ^
      10 |
      11 | describe('Label Component - Real Source Code Tests', () => {
      12 |   test('should render label element', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/label-card-alert.test.tsx:9:17)

FAIL __tests__/unit-conversion.test.ts
  Unit Conversion Utilities
    convertUnit
      ✓ converts Celsius to Fahrenheit (1 ms)
      ✓ converts Fahrenheit to Celsius
      ✓ converts Celsius to Kelvin
      ✓ converts hPa to psi
      ✓ converts psi to hPa
      ✓ converts meters to feet
      ✓ converts kilometers to miles
      ✓ returns same value for same unit
      ✓ returns null for unavailable conversion
    canConvertUnit
      ✓ returns true for available conversion
      ✓ returns true for same unit
      ✓ returns false for unavailable conversion (1 ms)
      ✓ returns false for unknown source unit
    getAvailableConversions
      ✓ returns available conversions for temperature (1 ms)
      ✓ returns available conversions for distance
      ✓ returns empty array for unknown unit (1 ms)
    convertMeasurementValues
      ✓ converts temperature thresholds from Celsius to Fahrenheit (1 ms)
      ✓ handles empty alert thresholds (1 ms)
      ✕ handles invalid numeric values gracefully (1 ms)
      ✓ returns empty strings when conversion not available
      ✓ converts distance measurements (1 ms)
    Bidirectional conversions
      ✓ converting back and forth preserves original value (1 ms)
      ✓ pressure conversions are consistent

  ● Unit Conversion Utilities › convertMeasurementValues › handles invalid numeric values gracefully

    expect(received).toBeCloseTo(expected, precision)

    Matcher error: received value must be a number

    Received has type:  string
    Received has value: "78.8"

      125 |       const result = convertMeasurementValues('invalid', '26', '10', '35', '°C', '°F')
      126 |       expect(result.lowerNormal).toBe('')
    > 127 |       expect(result.upperNormal).toBeCloseTo(78.8, 1)
          |                                  ^
      128 |     })
      129 |
      130 |     test('returns empty strings when conversion not available', () => {

      at Object.toBeCloseTo (__tests__/unit-conversion.test.ts:127:34)

FAIL src/lib/sync/__tests__/integration-sync-orchestrator.test.ts
  IntegrationSyncOrchestrator
    syncIntegration
      ✕ should successfully sync devices from provider (2 ms)
      ✕ should handle connection test failures (1 ms)
      ✓ should support dry run mode

  ● IntegrationSyncOrchestrator › syncIntegration › should successfully sync devices from provider

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      100 |       const result = await orchestrator.syncIntegration('org-001', 'int-001');
      101 |
    > 102 |       expect(result.success).toBe(true);
          |                              ^
      103 |       expect(result.devicesProcessed).toBeGreaterThan(0);
      104 |     });
      105 |

      at Object.toBe (src/lib/sync/__tests__/integration-sync-orchestrator.test.ts:102:30)

  ● IntegrationSyncOrchestrator › syncIntegration › should handle connection test failures

    expect(received).toContain(expected) // indexOf

    Expected substring: "Connection timeout"
    Received string:    "this.supabase.from(...).select(...).eq is not a function"

      122 |       expect(result.success).toBe(false);
      123 |       expect(result.errors).toHaveLength(1);
    > 124 |       expect(result.errors[0].error).toContain('Connection timeout');
          |                                      ^
      125 |     });
      126 |
      127 |     it('should support dry run mode', async () => {

      at Object.toContain (src/lib/sync/__tests__/integration-sync-orchestrator.test.ts:124:38)

FAIL __tests__/components/alerts/AlertsList.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/utils/test-utils.tsx
      __tests__/components/alerts/AlertsList.test.tsx

      33 |     loading: boolean
      34 |     error: string | null
    > 35 |     isSuperAdmin: boolean
         |                          ^
      36 |     isOrgOwner: boolean
      37 |     isOrgAdmin: boolean
      38 |     role: string | null

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/utils/test-utils.tsx:35:30)
      at Object.<anonymous> (__tests__/components/alerts/AlertsList.test.tsx:26:20)

FAIL __tests__/components/organizations-real.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/organizations-real.test.tsx

      112 |     await waitFor(() => expect(container).toBeTruthy())
      113 |   })
    > 114 |
          | ^
      115 |   test('OrganizationSelector renders with context', async () => {
      116 |     const { OrganizationSelector } = await import('@/components/organization/OrganizationSelector')
      117 |     const { container } = render(<OrganizationSelector />)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/organizations-real.test.tsx:114:17)

FAIL __tests__/pages/all-pages.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/pages/all-pages.test.tsx

      32 |
      33 | describe('Dashboard Pages', () => {
    > 34 |   test('Dashboard main page renders', async () => {
         |                 ^
      35 |     const DashboardPage = (await import('@/app/dashboard/page')).default
      36 |     const { container } = render(<DashboardPage />)
      37 |     await waitFor(() => expect(container.firstChild).toBeTruthy())

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/pages/all-pages.test.tsx:34:17)

FAIL __tests__/lib/utils-extended.test.ts
  Utility Functions - Extended Tests
    formatDate
      ✕ formats valid ISO date string (1 ms)
      ✕ handles Date object
      ✕ handles different date formats
    isValidEmail
      ✕ validates standard email formats
      ✕ rejects invalid email formats
      ✕ handles edge cases
    getInitials
      ✕ extracts initials from full names (1 ms)
      ✕ handles single names
      ✕ handles empty or whitespace input
      ✕ handles special characters (1 ms)
    cn (className utility)
      ✓ merges multiple class names (13 ms)
      ✓ handles conditional classes (1 ms)
      ✓ handles undefined and null
      ✓ handles empty strings
      ✓ merges tailwind classes correctly

  ● Utility Functions - Extended Tests › formatDate › formats valid ISO date string

    TypeError: (0 , _utils.formatDate) is not a function

       8 |   describe('formatDate', () => {
       9 |     test('formats valid ISO date string', () => {
    > 10 |       const result = formatDate('2024-01-15T10:30:00Z')
         |                                ^
      11 |       expect(result).toBeTruthy()
      12 |       expect(typeof result).toBe('string')
      13 |     })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:10:32)

  ● Utility Functions - Extended Tests › formatDate › handles Date object

    TypeError: (0 , _utils.formatDate) is not a function

      15 |     test('handles Date object', () => {
      16 |       const date = new Date('2024-01-15')
    > 17 |       const result = formatDate(date.toISOString())
         |                                ^
      18 |       expect(result).toBeTruthy()
      19 |     })
      20 |

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:17:32)

  ● Utility Functions - Extended Tests › formatDate › handles different date formats

    TypeError: (0 , _utils.formatDate) is not a function

      20 |
      21 |     test('handles different date formats', () => {
    > 22 |       const result1 = formatDate('2024-01-01')
         |                                 ^
      23 |       const result2 = formatDate('2024-12-31')
      24 |       expect(result1).toBeTruthy()
      25 |       expect(result2).toBeTruthy()

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:22:33)

  ● Utility Functions - Extended Tests › isValidEmail › validates standard email formats

    TypeError: (0 , _utils.isValidEmail) is not a function

      29 |   describe('isValidEmail', () => {
      30 |     test('validates standard email formats', () => {
    > 31 |       expect(isValidEmail('user@example.com')).toBe(true)
         |                          ^
      32 |       expect(isValidEmail('user.name@example.com')).toBe(true)
      33 |       expect(isValidEmail('user+tag@example.co.uk')).toBe(true)
      34 |     })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:31:26)

  ● Utility Functions - Extended Tests › isValidEmail › rejects invalid email formats

    TypeError: (0 , _utils.isValidEmail) is not a function

      35 |
      36 |     test('rejects invalid email formats', () => {
    > 37 |       expect(isValidEmail('notanemail')).toBe(false)
         |                          ^
      38 |       expect(isValidEmail('@example.com')).toBe(false)
      39 |       expect(isValidEmail('user@')).toBe(false)
      40 |       expect(isValidEmail('user@.com')).toBe(false)

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:37:26)

  ● Utility Functions - Extended Tests › isValidEmail › handles edge cases

    TypeError: (0 , _utils.isValidEmail) is not a function

      42 |
      43 |     test('handles edge cases', () => {
    > 44 |       expect(isValidEmail('')).toBe(false)
         |                          ^
      45 |       expect(isValidEmail('user name@example.com')).toBe(false)
      46 |     })
      47 |   })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:44:26)

  ● Utility Functions - Extended Tests › getInitials › extracts initials from full names

    TypeError: (0 , _utils.getInitials) is not a function

      49 |   describe('getInitials', () => {
      50 |     test('extracts initials from full names', () => {
    > 51 |       expect(getInitials('John Doe')).toBeTruthy()
         |                         ^
      52 |       expect(getInitials('Alice Bob Charlie')).toBeTruthy()
      53 |     })
      54 |

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:51:25)

  ● Utility Functions - Extended Tests › getInitials › handles single names

    TypeError: (0 , _utils.getInitials) is not a function

      54 |
      55 |     test('handles single names', () => {
    > 56 |       const result = getInitials('John')
         |                                 ^
      57 |       expect(result).toBeTruthy()
      58 |       expect(result.length).toBeGreaterThan(0)
      59 |     })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:56:33)

  ● Utility Functions - Extended Tests › getInitials › handles empty or whitespace input

    TypeError: (0 , _utils.getInitials) is not a function

      60 |
      61 |     test('handles empty or whitespace input', () => {
    > 62 |       const result1 = getInitials('')
         |                                  ^
      63 |       const result2 = getInitials('   ')
      64 |       expect(result1).toBeDefined()
      65 |       expect(result2).toBeDefined()

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:62:34)

  ● Utility Functions - Extended Tests › getInitials › handles special characters

    TypeError: (0 , _utils.getInitials) is not a function

      67 |
      68 |     test('handles special characters', () => {
    > 69 |       const result = getInitials("O'Brien")
         |                                 ^
      70 |       expect(result).toBeTruthy()
      71 |     })
      72 |   })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:69:33)

PASS __tests__/components/ui-core.test.tsx
  Additional UI Components
    ✓ Button component exists (10 ms)
    ✓ Card component exists (4 ms)
    ✓ Dialog component exists (341 ms)
    ✓ Input component exists (3 ms)
    ✓ Label component exists (2 ms)
    ✓ Select component exists (44 ms)
    ✓ Table component exists (5 ms)
    ✓ Tabs component exists (5 ms)
    ✓ Badge component exists (3 ms)
    ✓ Alert component exists (2 ms)
    ✓ DropdownMenu component exists (25 ms)
    ✓ Switch component exists (6 ms)
    ✓ Textarea component exists (3 ms)

FAIL __tests__/app/settings-components.test.tsx
  Settings Components
    ✓ IntegrationsTab module loads (221 ms)
    ✕ UsersTab module loads (1 ms)
    ✕ OrganizationsTab module loads
    ✕ GeneralTab module loads
    ✕ DevicesTab module loads (1 ms)
    ✕ AlertsTab module loads (1 ms)
    ✕ SystemTab module loads
    ✓ ProfileTab module loads (12 ms)
    ✓ SecurityTab module loads (11 ms)
    ✓ PreferencesTab module loads (21 ms)
    ✓ UserOrganizationsTab module loads (43 ms)
    ✓ SettingsSection module loads (1 ms)
    ✓ SettingsFormGroup module loads

  ● Settings Components › UsersTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/UsersTab' from '__tests__/app/settings-components.test.tsx'

      10 |
      11 |   test('UsersTab module loads', async () => {
    > 12 |     const module2 = await import('@/app/dashboard/settings/components/UsersTab')
         |                           ^
      13 |     expect(module2.default).toBeDefined()
      14 |   })
      15 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:12:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:12:21)

  ● Settings Components › OrganizationsTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/OrganizationsTab' from '__tests__/app/settings-components.test.tsx'

      15 |
      16 |   test('OrganizationsTab module loads', async () => {
    > 17 |     const module3 = await import('@/app/dashboard/settings/components/OrganizationsTab')
         |                           ^
      18 |     expect(module3.default).toBeDefined()
      19 |   })
      20 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:17:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:17:21)

  ● Settings Components › GeneralTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/GeneralTab' from '__tests__/app/settings-components.test.tsx'

      20 |
      21 |   test('GeneralTab module loads', async () => {
    > 22 |     const module4 = await import('@/app/dashboard/settings/components/GeneralTab')
         |                           ^
      23 |     expect(module4.default).toBeDefined()
      24 |   })
      25 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:22:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:22:21)

  ● Settings Components › DevicesTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/DevicesTab' from '__tests__/app/settings-components.test.tsx'

      25 |
      26 |   test('DevicesTab module loads', async () => {
    > 27 |     const module5 = await import('@/app/dashboard/settings/components/DevicesTab')
         |                           ^
      28 |     expect(module5.default).toBeDefined()
      29 |   })
      30 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:27:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:27:21)

  ● Settings Components › AlertsTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/AlertsTab' from '__tests__/app/settings-components.test.tsx'

      30 |
      31 |   test('AlertsTab module loads', async () => {
    > 32 |     const module6 = await import('@/app/dashboard/settings/components/AlertsTab')
         |                           ^
      33 |     expect(module6.default).toBeDefined()
      34 |   })
      35 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:32:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:32:21)

  ● Settings Components › SystemTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/SystemTab' from '__tests__/app/settings-components.test.tsx'

      35 |
      36 |   test('SystemTab module loads', async () => {
    > 37 |     const module7 = await import('@/app/dashboard/settings/components/SystemTab')
         |                           ^
      38 |     expect(module7.default).toBeDefined()
      39 |   })
      40 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:37:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:37:21)

FAIL __tests__/app/layouts.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/app/layouts.test.tsx

      88 | })
      89 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/app/layouts.test.tsx:90:17)

PASS src/lib/sync/__tests__/conflict-detector.test.ts
  ConflictDetector
    detectConflicts
      ✓ should detect conflicts in changed fields (2 ms)
      ✓ should not detect conflicts for identical fields (1 ms)
      ✓ should recommend correct merge strategies (1 ms)

  console.log
    
    ✅ Issue #51 Status: Sentry Configuration

      at Object.log (__tests__/configuration/sentry-status.test.ts:16:13)

  console.log
    ================================

      at Object.log (__tests__/configuration/sentry-status.test.ts:17:13)

  console.log
    📦 @sentry/nextjs: ^9.47.1

      at Object.log (__tests__/configuration/sentry-status.test.ts:18:13)

  console.log
    📦 @supabase/sentry-js-integration: ^0.3.0

      at Object.log (__tests__/configuration/sentry-status.test.ts:19:13)

  console.log


      at Object.log (__tests__/configuration/sentry-status.test.ts:20:13)

  console.log
    Configuration files present:

      at Object.log (__tests__/configuration/sentry-status.test.ts:21:13)

  console.log
      ✅ instrumentation-client.ts (Client-side init)

      at Object.log (__tests__/configuration/sentry-status.test.ts:22:13)

  console.log
      ✅ sentry.server.config.ts (Server-side)

      at Object.log (__tests__/configuration/sentry-status.test.ts:23:13)

  console.log
      ✅ sentry.edge.config.ts (Edge runtime)

      at Object.log (__tests__/configuration/sentry-status.test.ts:24:13)

  console.log


      at Object.log (__tests__/configuration/sentry-status.test.ts:25:13)

  console.log
    DSN Configuration:

      at Object.log (__tests__/configuration/sentry-status.test.ts:26:13)

  console.log
      ✅ Production Sentry DSN configured in .env.local

      at Object.log (__tests__/configuration/sentry-status.test.ts:27:13)

  console.log
      ✅ Connected to production Sentry project

      at Object.log (__tests__/configuration/sentry-status.test.ts:28:13)

  console.log


      at Object.log (__tests__/configuration/sentry-status.test.ts:29:13)

  console.log
    Features configured:

      at Object.log (__tests__/configuration/sentry-status.test.ts:30:13)

  console.log
      ✅ Session Replay with privacy controls

      at Object.log (__tests__/configuration/sentry-status.test.ts:31:13)

  console.log
      ✅ Performance Monitoring

      at Object.log (__tests__/configuration/sentry-status.test.ts:32:13)

  console.log
      ✅ Supabase Integration

      at Object.log (__tests__/configuration/sentry-status.test.ts:33:13)

  console.log
      ✅ Sensitive data filtering

      at Object.log (__tests__/configuration/sentry-status.test.ts:34:13)

  console.log
      ✅ Environment detection

      at Object.log (__tests__/configuration/sentry-status.test.ts:35:13)

  console.log
      ✅ Release tracking

      at Object.log (__tests__/configuration/sentry-status.test.ts:36:13)

  console.log


      at Object.log (__tests__/configuration/sentry-status.test.ts:37:13)

  console.log
    Error reporting ready:

      at Object.log (__tests__/configuration/sentry-status.test.ts:38:13)

  console.log
      ✅ Client-side errors will be captured

      at Object.log (__tests__/configuration/sentry-status.test.ts:39:13)

  console.log
      ✅ Server-side errors will be captured

      at Object.log (__tests__/configuration/sentry-status.test.ts:40:13)

  console.log
      ✅ Edge runtime errors will be captured

      at Object.log (__tests__/configuration/sentry-status.test.ts:41:13)

  console.log
      ✅ Session replays enabled for debugging

      at Object.log (__tests__/configuration/sentry-status.test.ts:42:13)

  console.log
      ✅ Performance traces being collected

      at Object.log (__tests__/configuration/sentry-status.test.ts:43:13)

  console.log


      at Object.log (__tests__/configuration/sentry-status.test.ts:44:13)

  console.log
    Status: ✅✅ FULLY CONFIGURED AND OPERATIONAL

      at Object.log (__tests__/configuration/sentry-status.test.ts:45:13)

  console.log
            ✅ Production Sentry DSN is active

      at Object.log (__tests__/configuration/sentry-status.test.ts:46:13)

  console.log
            ✅ Error monitoring is live

      at Object.log (__tests__/configuration/sentry-status.test.ts:47:13)

  console.log
    ================================

      at Object.log (__tests__/configuration/sentry-status.test.ts:48:13)

PASS __tests__/configuration/sentry-status.test.ts
  Sentry Configuration - Issue #51
    ✓ should have Sentry packages installed and configured (33 ms)

PASS __tests__/components/integration-dialogs.test.tsx
  Integration Dialog Components
    ✓ MqttConfigDialog module loads (45 ms)
    ✓ GoliothConfigDialog module loads (13 ms)
    ✓ WebhookConfigDialog module loads (1 ms)
    ✓ SlackConfigDialog module loads
    ✓ EmailConfigDialog module loads (1 ms)
    ✓ AwsIotConfigDialog module loads (1 ms)
    ✓ AzureIotConfigDialog module loads (1 ms)
    ✓ GoogleIotConfigDialog module loads (7 ms)
    ✓ GoliothSyncButton module loads (6 ms)
    ✓ ConflictResolutionDialog module loads (1 ms)
    ✓ SyncHistoryList module loads (5 ms)

FAIL __tests__/pages/additional-pages.test.tsx
  Additional Pages
    ✓ Test Sentry page module loads (9 ms)
    ✕ Test Notification page module loads
    ✓ Dashboard Users page renders (85 ms)

  ● Additional Pages › Test Notification page module loads

    Cannot find module '../../src/app/test-notifications/page' from '__tests__/pages/additional-pages.test.tsx'

      58 |   test('Test Notification page module loads', async () => {
      59 |     // Just verify module can be imported
    > 60 |     const notificationModule = await import('@/app/test-notifications/page')
         |                                      ^
      61 |     expect(notificationModule.default).toBeDefined()
      62 |   })
      63 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/pages/additional-pages.test.tsx:60:38
      at Object.<anonymous> (__tests__/pages/additional-pages.test.tsx:60:32)

FAIL __tests__/components/integrations-real.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/integrations-real.test.tsx



      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/integrations-real.test.tsx:70:17)

FAIL __tests__/pages/dashboard.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/pages/dashboard.test.tsx

      58 |     })
      59 |   })
    > 60 |
         | ^
      61 |   test('dashboard page has content', async () => {
      62 |     render(<DashboardPage />)
      63 |     

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/pages/dashboard.test.tsx:60:17)

FAIL __tests__/lib/utils-additional.test.ts
  Utils - formatDate
    ✕ formats date correctly
    ✕ handles invalid date
  Utils - isValidEmail
    ✕ validates correct email
    ✕ rejects invalid email
    ✕ rejects email without domain
  Utils - getInitials
    ✕ gets initials from full name (1 ms)
    ✕ handles single name
    ✕ handles empty string (10 ms)
  Utils - cn (className merger)
    ✓ merges classnames (4 ms)
    ✓ handles conditional classes (1 ms)

  ● Utils - formatDate › formats date correctly

    TypeError: (0 , _utils.formatDate) is not a function

       9 |   test('formats date correctly', () => {
      10 |     const date = new Date('2024-01-15T10:30:00Z')
    > 11 |     const formatted = formatDate(date.toISOString())
         |                                 ^
      12 |     expect(formatted).toContain('Jan')
      13 |   })
      14 |

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:11:33)

  ● Utils - formatDate › handles invalid date

    TypeError: (0 , _utils.formatDate) is not a function

      14 |
      15 |   test('handles invalid date', () => {
    > 16 |     const result = formatDate('invalid')
         |                              ^
      17 |     expect(result).toBe('Invalid Date')
      18 |   })
      19 | })

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:16:30)

  ● Utils - isValidEmail › validates correct email

    TypeError: (0 , _utils.isValidEmail) is not a function

      21 | describe('Utils - isValidEmail', () => {
      22 |   test('validates correct email', () => {
    > 23 |     expect(isValidEmail('test@example.com')).toBe(true)
         |                        ^
      24 |   })
      25 |
      26 |   test('rejects invalid email', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:23:24)

  ● Utils - isValidEmail › rejects invalid email

    TypeError: (0 , _utils.isValidEmail) is not a function

      25 |
      26 |   test('rejects invalid email', () => {
    > 27 |     expect(isValidEmail('notanemail')).toBe(false)
         |                        ^
      28 |   })
      29 |
      30 |   test('rejects email without domain', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:27:24)

  ● Utils - isValidEmail › rejects email without domain

    TypeError: (0 , _utils.isValidEmail) is not a function

      29 |
      30 |   test('rejects email without domain', () => {
    > 31 |     expect(isValidEmail('test@')).toBe(false)
         |                        ^
      32 |   })
      33 | })
      34 |

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:31:24)

  ● Utils - getInitials › gets initials from full name

    TypeError: (0 , _utils.getInitials) is not a function

      35 | describe('Utils - getInitials', () => {
      36 |   test('gets initials from full name', () => {
    > 37 |     expect(getInitials('John Doe')).toBe('JD')
         |                       ^
      38 |   })
      39 |
      40 |   test('handles single name', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:37:23)

  ● Utils - getInitials › handles single name

    TypeError: (0 , _utils.getInitials) is not a function

      39 |
      40 |   test('handles single name', () => {
    > 41 |     expect(getInitials('John')).toBe('J')
         |                       ^
      42 |   })
      43 |
      44 |   test('handles empty string', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:41:23)

  ● Utils - getInitials › handles empty string

    TypeError: (0 , _utils.getInitials) is not a function

      43 |
      44 |   test('handles empty string', () => {
    > 45 |     expect(getInitials('')).toBe('??')
         |                       ^
      46 |   })
      47 | })
      48 |

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:45:23)

PASS __tests__/components/dashboard.test.tsx
  Dashboard Components
    ✓ DeviceStatusCard component exists (6 ms)
    ✓ LocationsCard component exists (23 ms)
    ✓ AlertsCard component exists (48 ms)
    ✓ RecentActivityCard component exists (5 ms)
    ✓ SystemStatsCard component exists (5 ms)
    ✓ DashboardShell component exists (52 ms)
    ✓ DashboardOverview component exists (9 ms)

PASS __tests__/components/providers.test.tsx
  Provider Components
    ✓ UserProvider from contexts module loads (2 ms)
    ✓ OrganizationProvider from contexts module loads (2 ms)
    ✓ ErrorBoundary module loads (35 ms)
    ✓ SentryUserTracker module loads (3 ms)

PASS __tests__/lib/supabase.test.ts
  Supabase Function Utilities
    ✓ Supabase client factory exists (1 ms)
    ✓ Supabase server module exists (34 ms)
  Additional Utility Functions
    ✓ utils module loads (10 ms)

PASS __tests__/components/additional-coverage.test.tsx
  Integration Component Utilities
    ✓ DeviceIntegrationManager exists (75 ms)
    ✓ Providers wrapper exists (97 ms)

PASS __tests__/components/devices.test.tsx
  Device Components
    ✓ DevicesHeader component exists (33 ms)
    ✓ DevicesList component exists (361 ms)

PASS __tests__/components/alerts.test.tsx
  Alert Components
    ✓ AlertsHeader component exists (22 ms)
    ✓ AlertsList component exists (79 ms)

PASS __tests__/components/users.test.tsx
  User Components
    ✓ UsersHeader component exists (105 ms)
    ✓ UsersList component exists (18 ms)

PASS __tests__/hooks/hooks.test.ts
  Custom Hooks
    ✓ use-toast hook exists (2 ms)

Summary of all failing tests
FAIL __tests__/components/sensors/AlertsThresholdsCard.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../src/__tests__/utils/test-utils' from '__tests__/components/sensors/AlertsThresholdsCard.test.tsx'

      59 |     })),
      60 |   })),
    > 61 | }))
         |    ^
      62 |
      63 | describe('AlertsThresholdsCard Component', () => {
      64 |   const mockDevice = createMockDevice({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (__tests__/components/sensors/AlertsThresholdsCard.test.tsx:61:20)

FAIL __tests__/lib/edge-functions-client.test.ts
  ● EdgeFunctionClient › Authentication › should handle missing session gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"headers": ObjectNotContaining {"Authorization": Any<String>}}
    Received: "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/devices", {"headers": {"Authorization": "Bearer local-anon-key-placeholder", "Content-Type": "application/json"}, "method": "GET"}

    Number of calls: 1

      69 |       await newClient.call('devices')
      70 |
    > 71 |       expect(mockFetch).toHaveBeenCalledWith(
         |                         ^
      72 |         expect.any(String),
      73 |         expect.objectContaining({
      74 |           headers: expect.not.objectContaining({

      at Object.toHaveBeenCalledWith (__tests__/lib/edge-functions-client.test.ts:71:25)

  ● EdgeFunctionClient › Integrations API › should test an integration

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/integration-test/int-123", ObjectContaining {"method": "POST"}
    Received: "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/integration-test", {"body": "{\"integrationId\":\"int-123\"}", "headers": {"Authorization": "Bearer mock-token-12345", "Content-Type": "application/json"}, "method": "POST"}

    Number of calls: 1

      274 |       await client.integrations.test('int-123')
      275 |
    > 276 |       expect(mockFetch).toHaveBeenCalledWith(
          |                         ^
      277 |         expect.stringContaining('/integration-test/int-123'),
      278 |         expect.objectContaining({
      279 |           method: 'POST',

      at Object.toHaveBeenCalledWith (__tests__/lib/edge-functions-client.test.ts:276:25)

  ● EdgeFunctionClient › Dashboard Stats API › should get dashboard statistics

    TypeError: Cannot read properties of undefined (reading 'get')

      318 |       } as Response)
      319 |
    > 320 |       const response = await client.dashboardStats.get('org-123')
          |                                                    ^
      321 |
      322 |       expect(response.success).toBe(true)
      323 |       expect(response.data?.devices.total).toBe(10)

      at Object.get (__tests__/lib/edge-functions-client.test.ts:320:52)

  ● EdgeFunctionClient › Members API › should update member role

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "organization_id=org-123", ObjectContaining {"body": StringContaining "admin", "method": "PUT"}
    Received: "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/members?organization_id=org-123", {"body": "{\"memberId\":\"user-123\",\"role\":\"admin\"}", "headers": {"Authorization": "Bearer mock-token-12345", "Content-Type": "application/json"}, "method": "PATCH"}

    Number of calls: 1

      370 |       await client.members.updateRole('org-123', 'user-123', 'admin')
      371 |
    > 372 |       expect(mockFetch).toHaveBeenCalledWith(
          |                         ^
      373 |         expect.stringContaining('organization_id=org-123'),
      374 |         expect.objectContaining({
      375 |           method: 'PUT',

      at Object.toHaveBeenCalledWith (__tests__/lib/edge-functions-client.test.ts:372:25)

  ● EdgeFunctionClient › Notifications API › should send a notification

    TypeError: Cannot read properties of undefined (reading 'send')

      426 |       } as Response)
      427 |
    > 428 |       await client.notifications.send({
          |                                  ^
      429 |         organization_id: 'org-123',
      430 |         integration_id: 'int-123',
      431 |         message: 'Test notification',

      at Object.send (__tests__/lib/edge-functions-client.test.ts:428:34)

  ● EdgeFunctionClient › Notifications API › should test notification configuration

    TypeError: Cannot read properties of undefined (reading 'test')

      448 |       } as Response)
      449 |
    > 450 |       await client.notifications.test('int-123')
          |                                  ^
      451 |
      452 |       const callUrl = mockFetch.mock.calls[0][0] as string
      453 |       expect(callUrl).toContain('test=true')

      at Object.test (__tests__/lib/edge-functions-client.test.ts:450:34)

  ● EdgeFunctionClient › MQTT Broker API › should connect to MQTT broker

    TypeError: Cannot read properties of undefined (reading 'connect')

      462 |       } as Response)
      463 |
    > 464 |       await client.mqttBroker.connect({
          |                               ^
      465 |         organization_id: 'org-123',
      466 |         integration_id: 'int-123',
      467 |         action: 'connect',

      at Object.connect (__tests__/lib/edge-functions-client.test.ts:464:31)

  ● EdgeFunctionClient › Error Handling › should handle network errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      484 |       const response = await client.call('devices')
      485 |
    > 486 |       expect(response.success).toBe(false)
          |                                ^
      487 |       expect(response.error?.message).toContain('Network error')
      488 |     })
      489 |

      at Object.toBe (__tests__/lib/edge-functions-client.test.ts:486:32)

  ● EdgeFunctionClient › Error Handling › should handle API error responses

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      499 |       const response = await client.devices.list('org-123')
      500 |
    > 501 |       expect(response.success).toBe(false)
          |                                ^
      502 |       expect(response.error?.message).toBe('Unauthorized')
      503 |       expect(response.error?.status).toBe(401)
      504 |     })

      at Object.toBe (__tests__/lib/edge-functions-client.test.ts:501:32)

  ● EdgeFunctionClient › Error Handling › should handle malformed JSON responses

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      514 |       const response = await client.call('devices')
      515 |
    > 516 |       expect(response.success).toBe(false)
          |                                ^
      517 |       expect(response.error?.message).toContain('Invalid JSON')
      518 |     })
      519 |   })

      at Object.toBe (__tests__/lib/edge-functions-client.test.ts:516:32)

  ● EdgeFunctionClient › Query Parameters › should encode special characters in params

    expect(received).toContain(expected) // indexOf

    Expected substring: "device%20name%20with%20spaces"
    Received string:    "https://ominous-space-waddle-pj659vr75wjv37767-54321.app.github.dev/functions/v1/devices?search=device+name+with+spaces"

      553 |
      554 |       const callUrl = mockFetch.mock.calls[0][0] as string
    > 555 |       expect(callUrl).toContain('device%20name%20with%20spaces')
          |                       ^
      556 |     })
      557 |   })
      558 | })

      at Object.toContain (__tests__/lib/edge-functions-client.test.ts:555:23)

FAIL __tests__/components/organizations/EditOrganizationDialog.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/organizations/EditOrganizationDialog.test.tsx

      18 |   }),
      19 | }));
    > 20 |
         | ^
      21 | // Mock Supabase client
      22 | const mockGetSession = jest.fn();
      23 | const mockCreateClient = jest.fn(() => ({

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/organizations/EditOrganizationDialog.test.tsx:20:17)

FAIL __tests__/components/devices/DeviceStatusCard.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../src/__tests__/utils/test-utils' from '__tests__/components/devices/DeviceStatusCard.test.tsx'

      20 | import { useDeviceStatus } from '@/hooks/useDeviceStatus'
      21 |
    > 22 | // Mock useDeviceStatus hook
         |                    ^
      23 | jest.mock('@/hooks/useDeviceStatus')
      24 |
      25 | const mockUseDeviceStatus = useDeviceStatus as jest.MockedFunction<typeof useDeviceStatus>

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (__tests__/components/devices/DeviceStatusCard.test.tsx:22:20)

FAIL __tests__/lib/utils.test.ts
  ● Utils Library - Real Source Code Tests › formatCurrency › should format USD correctly

    TypeError: (0 , _utils.formatCurrency) is not a function

      49 |   describe('formatCurrency', () => {
      50 |     test('should format USD correctly', () => {
    > 51 |       const result = formatCurrency(1234.56)
         |                                    ^
      52 |       expect(result).toBe('$1,234.56')
      53 |     })
      54 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:51:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should format with custom currency

    TypeError: (0 , _utils.formatCurrency) is not a function

      54 |
      55 |     test('should format with custom currency', () => {
    > 56 |       const result = formatCurrency(1234.56, 'EUR')
         |                                    ^
      57 |       expect(result).toContain('1,234.56')
      58 |     })
      59 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:56:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should handle zero

    TypeError: (0 , _utils.formatCurrency) is not a function

      59 |
      60 |     test('should handle zero', () => {
    > 61 |       const result = formatCurrency(0)
         |                                    ^
      62 |       expect(result).toBe('$0.00')
      63 |     })
      64 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:61:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should handle negative numbers

    TypeError: (0 , _utils.formatCurrency) is not a function

      64 |
      65 |     test('should handle negative numbers', () => {
    > 66 |       const result = formatCurrency(-100)
         |                                    ^
      67 |       expect(result).toBe('-$100.00')
      68 |     })
      69 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:66:36)

  ● Utils Library - Real Source Code Tests › formatCurrency › should handle large numbers

    TypeError: (0 , _utils.formatCurrency) is not a function

      69 |
      70 |     test('should handle large numbers', () => {
    > 71 |       const result = formatCurrency(1000000)
         |                                    ^
      72 |       expect(result).toBe('$1,000,000.00')
      73 |     })
      74 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:71:36)

  ● Utils Library - Real Source Code Tests › formatDate › should format date correctly

    TypeError: (0 , _utils.formatDate) is not a function

      77 |     test('should format date correctly', () => {
      78 |       const date = new Date('2024-01-15T10:30:00Z')
    > 79 |       const result = formatDate(date)
         |                                ^
      80 |       expect(result).toMatch(/Jan/)
      81 |       expect(result).toMatch(/15/)
      82 |       expect(result).toMatch(/2024/)

      at Object.<anonymous> (__tests__/lib/utils.test.ts:79:32)

  ● Utils Library - Real Source Code Tests › formatDate › should handle string dates

    TypeError: (0 , _utils.formatDate) is not a function

      84 |
      85 |     test('should handle string dates', () => {
    > 86 |       const result = formatDate('2024-01-15')
         |                                ^
      87 |       expect(result).toMatch(/Jan/)
      88 |       expect(result).toMatch(/1[45]/) // Could be 14 or 15 depending on timezone
      89 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:86:32)

  ● Utils Library - Real Source Code Tests › formatDate › should accept custom options

    TypeError: (0 , _utils.formatDate) is not a function

      91 |     test('should accept custom options', () => {
      92 |       const date = new Date('2024-01-15')
    > 93 |       const result = formatDate(date, { month: 'long' })
         |                                ^
      94 |       expect(result).toMatch(/January/)
      95 |     })
      96 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:93:32)

  ● Utils Library - Real Source Code Tests › formatDate › should handle ISO string dates

    TypeError: (0 , _utils.formatDate) is not a function

       96 |
       97 |     test('should handle ISO string dates', () => {
    >  98 |       const result = formatDate('2024-01-15T10:30:00.000Z')
          |                                ^
       99 |       expect(result).toContain('2024')
      100 |     })
      101 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:98:32)

  ● Utils Library - Real Source Code Tests › truncateText › should truncate long text

    TypeError: (0 , _utils.truncateText) is not a function

      104 |     test('should truncate long text', () => {
      105 |       const text = 'This is a very long text that needs to be truncated'
    > 106 |       const result = truncateText(text, 20)
          |                                  ^
      107 |       expect(result).toBe('This is a very long ...')
      108 |       expect(result.length).toBe(23) // 20 + '...'
      109 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:106:34)

  ● Utils Library - Real Source Code Tests › truncateText › should not truncate short text

    TypeError: (0 , _utils.truncateText) is not a function

      111 |     test('should not truncate short text', () => {
      112 |       const text = 'Short text'
    > 113 |       const result = truncateText(text, 20)
          |                                  ^
      114 |       expect(result).toBe('Short text')
      115 |     })
      116 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:113:34)

  ● Utils Library - Real Source Code Tests › truncateText › should handle exact length

    TypeError: (0 , _utils.truncateText) is not a function

      117 |     test('should handle exact length', () => {
      118 |       const text = 'Exactly twenty chars'
    > 119 |       const result = truncateText(text, 20)
          |                                  ^
      120 |       expect(result).toBe('Exactly twenty chars')
      121 |     })
      122 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:119:34)

  ● Utils Library - Real Source Code Tests › truncateText › should handle empty string

    TypeError: (0 , _utils.truncateText) is not a function

      122 |
      123 |     test('should handle empty string', () => {
    > 124 |       const result = truncateText('', 10)
          |                                  ^
      125 |       expect(result).toBe('')
      126 |     })
      127 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:124:34)

  ● Utils Library - Real Source Code Tests › truncateText › should handle zero length

    TypeError: (0 , _utils.truncateText) is not a function

      127 |
      128 |     test('should handle zero length', () => {
    > 129 |       const result = truncateText('test', 0)
          |                                  ^
      130 |       expect(result).toBe('...')
      131 |     })
      132 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:129:34)

  ● Utils Library - Real Source Code Tests › getInitials › should get initials from full name

    TypeError: (0 , _utils.getInitials) is not a function

      134 |   describe('getInitials', () => {
      135 |     test('should get initials from full name', () => {
    > 136 |       const result = getInitials('John Doe')
          |                                 ^
      137 |       expect(result).toBe('JD')
      138 |     })
      139 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:136:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle single name

    TypeError: (0 , _utils.getInitials) is not a function

      139 |
      140 |     test('should handle single name', () => {
    > 141 |       const result = getInitials('John')
          |                                 ^
      142 |       expect(result).toBe('J')
      143 |     })
      144 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:141:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle three names

    TypeError: (0 , _utils.getInitials) is not a function

      144 |
      145 |     test('should handle three names', () => {
    > 146 |       const result = getInitials('John Michael Doe')
          |                                 ^
      147 |       expect(result).toBe('JM') // Takes first 2
      148 |     })
      149 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:146:33)

  ● Utils Library - Real Source Code Tests › getInitials › should convert to uppercase

    TypeError: (0 , _utils.getInitials) is not a function

      149 |
      150 |     test('should convert to uppercase', () => {
    > 151 |       const result = getInitials('john doe')
          |                                 ^
      152 |       expect(result).toBe('JD')
      153 |     })
      154 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:151:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle special characters

    TypeError: (0 , _utils.getInitials) is not a function

      154 |
      155 |     test('should handle special characters', () => {
    > 156 |       const result = getInitials('O\'Brien Smith')
          |                                 ^
      157 |       expect(result).toBe('OS')
      158 |     })
      159 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:156:33)

  ● Utils Library - Real Source Code Tests › getInitials › should handle empty string

    TypeError: (0 , _utils.getInitials) is not a function

      159 |
      160 |     test('should handle empty string', () => {
    > 161 |       const result = getInitials('')
          |                                 ^
      162 |       // getInitials returns '??' for empty strings as a fallback
      163 |       expect(result).toBe('??')
      164 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:161:33)

  ● Utils Library - Real Source Code Tests › generateId › should generate unique IDs

    TypeError: (0 , _utils.generateId) is not a function

      167 |   describe('generateId', () => {
      168 |     test('should generate unique IDs', () => {
    > 169 |       const id1 = generateId()
          |                             ^
      170 |       const id2 = generateId()
      171 |       expect(id1).not.toBe(id2)
      172 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:169:29)

  ● Utils Library - Real Source Code Tests › generateId › should generate string IDs

    TypeError: (0 , _utils.generateId) is not a function

      173 |
      174 |     test('should generate string IDs', () => {
    > 175 |       const id = generateId()
          |                            ^
      176 |       expect(typeof id).toBe('string')
      177 |     })
      178 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:175:28)

  ● Utils Library - Real Source Code Tests › generateId › should generate non-empty IDs

    TypeError: (0 , _utils.generateId) is not a function

      178 |
      179 |     test('should generate non-empty IDs', () => {
    > 180 |       const id = generateId()
          |                            ^
      181 |       expect(id.length).toBeGreaterThan(0)
      182 |     })
      183 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:180:28)

  ● Utils Library - Real Source Code Tests › generateId › should generate alphanumeric IDs

    TypeError: (0 , _utils.generateId) is not a function

      183 |
      184 |     test('should generate alphanumeric IDs', () => {
    > 185 |       const id = generateId()
          |                            ^
      186 |       expect(id).toMatch(/^[a-z0-9]+$/)
      187 |     })
      188 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:185:28)

  ● Utils Library - Real Source Code Tests › generateId › should generate multiple unique IDs

    TypeError: (0 , _utils.generateId) is not a function

      190 |       const ids = new Set()
      191 |       for (let i = 0; i < 100; i++) {
    > 192 |         ids.add(generateId())
          |                           ^
      193 |       }
      194 |       expect(ids.size).toBe(100) // All unique
      195 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:192:27)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate correct email

    TypeError: (0 , _utils.isValidEmail) is not a function

      198 |   describe('isValidEmail', () => {
      199 |     test('should validate correct email', () => {
    > 200 |       expect(isValidEmail('test@example.com')).toBe(true)
          |                          ^
      201 |     })
      202 |
      203 |     test('should validate email with subdomain', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:200:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate email with subdomain

    TypeError: (0 , _utils.isValidEmail) is not a function

      202 |
      203 |     test('should validate email with subdomain', () => {
    > 204 |       expect(isValidEmail('user@mail.example.com')).toBe(true)
          |                          ^
      205 |     })
      206 |
      207 |     test('should validate email with plus', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:204:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate email with plus

    TypeError: (0 , _utils.isValidEmail) is not a function

      206 |
      207 |     test('should validate email with plus', () => {
    > 208 |       expect(isValidEmail('user+tag@example.com')).toBe(true)
          |                          ^
      209 |     })
      210 |
      211 |     test('should reject email without @', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:208:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email without @

    TypeError: (0 , _utils.isValidEmail) is not a function

      210 |
      211 |     test('should reject email without @', () => {
    > 212 |       expect(isValidEmail('testexample.com')).toBe(false)
          |                          ^
      213 |     })
      214 |
      215 |     test('should reject email without domain', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:212:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email without domain

    TypeError: (0 , _utils.isValidEmail) is not a function

      214 |
      215 |     test('should reject email without domain', () => {
    > 216 |       expect(isValidEmail('test@')).toBe(false)
          |                          ^
      217 |     })
      218 |
      219 |     test('should reject email without extension', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:216:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email without extension

    TypeError: (0 , _utils.isValidEmail) is not a function

      218 |
      219 |     test('should reject email without extension', () => {
    > 220 |       expect(isValidEmail('test@example')).toBe(false)
          |                          ^
      221 |     })
      222 |
      223 |     test('should reject empty string', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:220:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject empty string

    TypeError: (0 , _utils.isValidEmail) is not a function

      222 |
      223 |     test('should reject empty string', () => {
    > 224 |       expect(isValidEmail('')).toBe(false)
          |                          ^
      225 |     })
      226 |
      227 |     test('should reject email with spaces', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:224:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should reject email with spaces

    TypeError: (0 , _utils.isValidEmail) is not a function

      226 |
      227 |     test('should reject email with spaces', () => {
    > 228 |       expect(isValidEmail('test @example.com')).toBe(false)
          |                          ^
      229 |     })
      230 |
      231 |     test('should validate email with numbers', () => {

      at Object.<anonymous> (__tests__/lib/utils.test.ts:228:26)

  ● Utils Library - Real Source Code Tests › isValidEmail › should validate email with numbers

    TypeError: (0 , _utils.isValidEmail) is not a function

      230 |
      231 |     test('should validate email with numbers', () => {
    > 232 |       expect(isValidEmail('user123@test456.com')).toBe(true)
          |                          ^
      233 |     })
      234 |   })
      235 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:232:26)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return green for online

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      236 |   describe('getDeviceStatusColor', () => {
      237 |     test('should return green for online', () => {
    > 238 |       const result = getDeviceStatusColor('online')
          |                                          ^
      239 |       expect(result).toBe('text-green-600 bg-green-100')
      240 |     })
      241 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:238:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return gray for offline

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      241 |
      242 |     test('should return gray for offline', () => {
    > 243 |       const result = getDeviceStatusColor('offline')
          |                                          ^
      244 |       expect(result).toBe('text-gray-600 bg-gray-100')
      245 |     })
      246 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:243:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return yellow for warning

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      246 |
      247 |     test('should return yellow for warning', () => {
    > 248 |       const result = getDeviceStatusColor('warning')
          |                                          ^
      249 |       expect(result).toBe('text-yellow-600 bg-yellow-100')
      250 |     })
      251 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:248:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return red for error

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      251 |
      252 |     test('should return red for error', () => {
    > 253 |       const result = getDeviceStatusColor('error')
          |                                          ^
      254 |       expect(result).toBe('text-red-600 bg-red-100')
      255 |     })
      256 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:253:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should handle case insensitive

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      256 |
      257 |     test('should handle case insensitive', () => {
    > 258 |       const result = getDeviceStatusColor('ONLINE')
          |                                          ^
      259 |       expect(result).toBe('text-green-600 bg-green-100')
      260 |     })
      261 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:258:42)

  ● Utils Library - Real Source Code Tests › getDeviceStatusColor › should return default for unknown status

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      261 |
      262 |     test('should return default for unknown status', () => {
    > 263 |       const result = getDeviceStatusColor('unknown')
          |                                          ^
      264 |       expect(result).toBe('text-gray-600 bg-gray-100')
      265 |     })
      266 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:263:42)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return blue for low

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      268 |   describe('getAlertSeverityColor', () => {
      269 |     test('should return blue for low', () => {
    > 270 |       const result = getAlertSeverityColor('low')
          |                                           ^
      271 |       expect(result).toBe('text-blue-600 bg-blue-100')
      272 |     })
      273 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:270:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return yellow for medium

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      273 |
      274 |     test('should return yellow for medium', () => {
    > 275 |       const result = getAlertSeverityColor('medium')
          |                                           ^
      276 |       expect(result).toBe('text-yellow-600 bg-yellow-100')
      277 |     })
      278 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:275:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return orange for high

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      278 |
      279 |     test('should return orange for high', () => {
    > 280 |       const result = getAlertSeverityColor('high')
          |                                           ^
      281 |       expect(result).toBe('text-orange-600 bg-orange-100')
      282 |     })
      283 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:280:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return red for critical

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      283 |
      284 |     test('should return red for critical', () => {
    > 285 |       const result = getAlertSeverityColor('critical')
          |                                           ^
      286 |       expect(result).toBe('text-red-600 bg-red-100')
      287 |     })
      288 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:285:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should handle case insensitive

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      288 |
      289 |     test('should handle case insensitive', () => {
    > 290 |       const result = getAlertSeverityColor('CRITICAL')
          |                                           ^
      291 |       expect(result).toBe('text-red-600 bg-red-100')
      292 |     })
      293 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:290:43)

  ● Utils Library - Real Source Code Tests › getAlertSeverityColor › should return default for unknown severity

    TypeError: (0 , _utils.getAlertSeverityColor) is not a function

      293 |
      294 |     test('should return default for unknown severity', () => {
    > 295 |       const result = getAlertSeverityColor('unknown')
          |                                           ^
      296 |       expect(result).toBe('text-gray-600 bg-gray-100')
      297 |     })
      298 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:295:43)

  ● Utils Library - Real Source Code Tests › calculateUptime › should return Unknown for null

    TypeError: (0 , _utils.calculateUptime) is not a function

      300 |   describe('calculateUptime', () => {
      301 |     test('should return Unknown for null', () => {
    > 302 |       const result = calculateUptime(null)
          |                                     ^
      303 |       expect(result).toBe('Unknown')
      304 |     })
      305 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:302:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should calculate minutes ago

    TypeError: (0 , _utils.calculateUptime) is not a function

      306 |     test('should calculate minutes ago', () => {
      307 |       const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000).toISOString()
    > 308 |       const result = calculateUptime(fiveMinutesAgo)
          |                                     ^
      309 |       expect(result).toMatch(/5m ago/)
      310 |     })
      311 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:308:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should calculate hours ago

    TypeError: (0 , _utils.calculateUptime) is not a function

      312 |     test('should calculate hours ago', () => {
      313 |       const twoHoursAgo = new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString()
    > 314 |       const result = calculateUptime(twoHoursAgo)
          |                                     ^
      315 |       expect(result).toMatch(/2h/)
      316 |     })
      317 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:314:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should calculate days ago

    TypeError: (0 , _utils.calculateUptime) is not a function

      318 |     test('should calculate days ago', () => {
      319 |       const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
    > 320 |       const result = calculateUptime(threeDaysAgo)
          |                                     ^
      321 |       expect(result).toMatch(/3d/)
      322 |     })
      323 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:320:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should handle recent activity (< 1 minute)

    TypeError: (0 , _utils.calculateUptime) is not a function

      324 |     test('should handle recent activity (< 1 minute)', () => {
      325 |       const thirtySecondsAgo = new Date(Date.now() - 30 * 1000).toISOString()
    > 326 |       const result = calculateUptime(thirtySecondsAgo)
          |                                     ^
      327 |       expect(result).toMatch(/0m ago/)
      328 |     })
      329 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:326:37)

  ● Utils Library - Real Source Code Tests › calculateUptime › should handle ISO string format

    TypeError: (0 , _utils.calculateUptime) is not a function

      330 |     test('should handle ISO string format', () => {
      331 |       const date = '2024-01-01T10:00:00.000Z'
    > 332 |       const result = calculateUptime(date)
          |                                     ^
      333 |       expect(result).toBeTruthy()
      334 |       expect(typeof result).toBe('string')
      335 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:332:37)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › truncateText should handle unicode characters

    TypeError: (0 , _utils.truncateText) is not a function

      339 |     test('truncateText should handle unicode characters', () => {
      340 |       const text = '你好世界��'
    > 341 |       const result = truncateText(text, 3)
          |                                  ^
      342 |       expect(result.length).toBeLessThanOrEqual(6) // 3 chars + '...'
      343 |     })
      344 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:341:34)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › getInitials should handle multiple spaces

    TypeError: (0 , _utils.getInitials) is not a function

      344 |
      345 |     test('getInitials should handle multiple spaces', () => {
    > 346 |       const result = getInitials('John  Doe')
          |                                 ^
      347 |       expect(result).toBe('JD')
      348 |     })
      349 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:346:33)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › formatCurrency should handle decimal precision

    TypeError: (0 , _utils.formatCurrency) is not a function

      349 |
      350 |     test('formatCurrency should handle decimal precision', () => {
    > 351 |       const result = formatCurrency(10.999)
          |                                    ^
      352 |       expect(result).toBe('$11.00') // Rounds to 2 decimals
      353 |     })
      354 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:351:36)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › isValidEmail should handle edge case emails

    TypeError: (0 , _utils.isValidEmail) is not a function

      354 |
      355 |     test('isValidEmail should handle edge case emails', () => {
    > 356 |       expect(isValidEmail('a@b.co')).toBe(true) // Short valid email
          |                          ^
      357 |       expect(isValidEmail('test..email@example.com')).toBe(true) // Double dot (technically invalid but regex allows)
      358 |     })
      359 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:356:26)

  ● Utils Library - Real Source Code Tests › Edge Cases and Error Handling › generateId should not contain special characters

    TypeError: (0 , _utils.generateId) is not a function

      359 |
      360 |     test('generateId should not contain special characters', () => {
    > 361 |       const id = generateId()
          |                            ^
      362 |       expect(id).not.toMatch(/[^a-z0-9]/)
      363 |     })
      364 |   })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:361:28)

  ● Utils Library - Real Source Code Tests › Integration Tests › should format and truncate text together

    TypeError: (0 , _utils.truncateText) is not a function

      367 |     test('should format and truncate text together', () => {
      368 |       const longText = 'This is a very long device name that needs formatting'
    > 369 |       const truncated = truncateText(longText, 20)
          |                                     ^
      370 |       expect(truncated).toMatch(/\.\.\./)
      371 |       expect(truncated.length).toBeLessThanOrEqual(23)
      372 |     })

      at Object.<anonymous> (__tests__/lib/utils.test.ts:369:37)

  ● Utils Library - Real Source Code Tests › Integration Tests › should get initials and validate email

    TypeError: (0 , _utils.isValidEmail) is not a function

      376 |       const name = 'John Doe'
      377 |       
    > 378 |       expect(isValidEmail(email)).toBe(true)
          |                          ^
      379 |       expect(getInitials(name)).toBe('JD')
      380 |     })
      381 |

      at Object.<anonymous> (__tests__/lib/utils.test.ts:378:26)

  ● Utils Library - Real Source Code Tests › Integration Tests › should handle device status and alert severity together

    TypeError: (0 , _utils.getDeviceStatusColor) is not a function

      381 |
      382 |     test('should handle device status and alert severity together', () => {
    > 383 |       const deviceStatus = getDeviceStatusColor('error')
          |                                                ^
      384 |       const alertSeverity = getAlertSeverityColor('critical')
      385 |       
      386 |       expect(deviceStatus).toContain('red')

      at Object.<anonymous> (__tests__/lib/utils.test.ts:383:48)

  ● Utils Library - Real Source Code Tests › Performance Tests › should generate 1000 IDs quickly

    TypeError: (0 , _utils.generateId) is not a function

      393 |       const start = Date.now()
      394 |       for (let i = 0; i < 1000; i++) {
    > 395 |         generateId()
          |                   ^
      396 |       }
      397 |       const duration = Date.now() - start
      398 |       expect(duration).toBeLessThan(100) // Should be very fast

      at Object.<anonymous> (__tests__/lib/utils.test.ts:395:19)

  ● Utils Library - Real Source Code Tests › Performance Tests › should validate 1000 emails quickly

    TypeError: (0 , _utils.isValidEmail) is not a function

      402 |       const start = Date.now()
      403 |       for (let i = 0; i < 1000; i++) {
    > 404 |         isValidEmail(`user${i}@example.com`)
          |                     ^
      405 |       }
      406 |       const duration = Date.now() - start
      407 |       expect(duration).toBeLessThan(50)

      at Object.<anonymous> (__tests__/lib/utils.test.ts:404:21)

  ● Utils Library - Real Source Code Tests › Performance Tests › should truncate 1000 texts quickly

    TypeError: (0 , _utils.truncateText) is not a function

      412 |       const text = 'This is a long text that needs to be truncated'
      413 |       for (let i = 0; i < 1000; i++) {
    > 414 |         truncateText(text, 20)
          |                     ^
      415 |       }
      416 |       const duration = Date.now() - start
      417 |       expect(duration).toBeLessThan(50)

      at Object.<anonymous> (__tests__/lib/utils.test.ts:414:21)

FAIL __tests__/components/ui/comprehensive-ui.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/comprehensive-ui.test.tsx

       8 |
       9 | // Import all UI components
    > 10 | import { Textarea } from '@/components/ui/textarea'
         |                 ^
      11 | import { Switch } from '@/components/ui/switch'
      12 | import { Progress } from '@/components/ui/progress'
      13 | import { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/comprehensive-ui.test.tsx:10:17)

FAIL __tests__/components/ui/button.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/button.test.tsx

       8 | import { Button, buttonVariants } from '@/components/ui/button'
       9 |
    > 10 | describe('Button Component - Real Source Code Tests', () => {
         |                 ^
      11 |   describe('Basic Rendering', () => {
      12 |     test('should render button with text', () => {
      13 |       render(<Button>Click me</Button>)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/button.test.tsx:10:17)

FAIL __tests__/components/ui/input.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/input.test.tsx

       7 | import { Input } from '@/components/ui/input'
       8 |
    >  9 | describe('Input Component - Real Source Code Tests', () => {
         |                 ^
      10 |   describe('Basic Rendering', () => {
      11 |     test('should render input element', () => {
      12 |       const { container } = render(<Input />)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/input.test.tsx:9:17)

FAIL __tests__/lib/api-error-handler.test.ts
  ● handleApiError › Successful responses › returns no error for 200 OK

    ReferenceError: Response is not defined

      10 |   describe('Successful responses', () => {
      11 |     test('returns no error for 200 OK', () => {
    > 12 |       const response = new Response(null, { status: 200, statusText: 'OK' })
         |                        ^
      13 |       const result = handleApiError(response, { throwOnError: false })
      14 |       
      15 |       expect(result.isError).toBe(false)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:12:24)

  ● handleApiError › Successful responses › returns no error for 201 Created

    ReferenceError: Response is not defined

      19 |
      20 |     test('returns no error for 201 Created', () => {
    > 21 |       const response = new Response(null, { status: 201, statusText: 'Created' })
         |                        ^
      22 |       const result = handleApiError(response, { throwOnError: false })
      23 |       
      24 |       expect(result.isError).toBe(false)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:21:24)

  ● handleApiError › Successful responses › returns no error for 204 No Content

    ReferenceError: Response is not defined

      27 |
      28 |     test('returns no error for 204 No Content', () => {
    > 29 |       const response = new Response(null, { status: 204, statusText: 'No Content' })
         |                        ^
      30 |       const result = handleApiError(response, { throwOnError: false })
      31 |       
      32 |       expect(result.isError).toBe(false)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:29:24)

  ● handleApiError › Authentication errors › identifies 401 Unauthorized as auth error

    ReferenceError: Response is not defined

      37 |   describe('Authentication errors', () => {
      38 |     test('identifies 401 Unauthorized as auth error', () => {
    > 39 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
         |                        ^
      40 |       const result = handleApiError(response, { throwOnError: false })
      41 |       
      42 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:39:24)

  ● handleApiError › Authentication errors › identifies 403 Forbidden as auth error

    ReferenceError: Response is not defined

      46 |
      47 |     test('identifies 403 Forbidden as auth error', () => {
    > 48 |       const response = new Response(null, { status: 403, statusText: 'Forbidden' })
         |                        ^
      49 |       const result = handleApiError(response, { throwOnError: false })
      50 |       
      51 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:48:24)

  ● handleApiError › Authentication errors › silently handles auth errors by default

    ReferenceError: Response is not defined

      55 |
      56 |     test('silently handles auth errors by default', () => {
    > 57 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
         |                        ^
      58 |       
      59 |       // Should not throw even though throwOnError is true
      60 |       expect(() => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:57:24)

  ● handleApiError › Authentication errors › can throw auth errors if configured

    ReferenceError: Response is not defined

      64 |
      65 |     test('can throw auth errors if configured', () => {
    > 66 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
         |                        ^
      67 |       
      68 |       expect(() => {
      69 |         handleApiError(response, { throwOnError: true, silentAuthErrors: false })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:66:24)

  ● handleApiError › Client errors (4xx) › identifies 400 Bad Request as error

    ReferenceError: Response is not defined

      74 |   describe('Client errors (4xx)', () => {
      75 |     test('identifies 400 Bad Request as error', () => {
    > 76 |       const response = new Response(null, { status: 400, statusText: 'Bad Request' })
         |                        ^
      77 |       const result = handleApiError(response, { throwOnError: false })
      78 |       
      79 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:76:24)

  ● handleApiError › Client errors (4xx) › identifies 404 Not Found as error

    ReferenceError: Response is not defined

      84 |
      85 |     test('identifies 404 Not Found as error', () => {
    > 86 |       const response = new Response(null, { status: 404, statusText: 'Not Found' })
         |                        ^
      87 |       const result = handleApiError(response, { throwOnError: false })
      88 |       
      89 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:86:24)

  ● handleApiError › Client errors (4xx) › identifies 422 Unprocessable Entity as error

    ReferenceError: Response is not defined

      93 |
      94 |     test('identifies 422 Unprocessable Entity as error', () => {
    > 95 |       const response = new Response(null, { status: 422, statusText: 'Unprocessable Entity' })
         |                        ^
      96 |       const result = handleApiError(response, { throwOnError: false })
      97 |       
      98 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:95:24)

  ● handleApiError › Server errors (5xx) › identifies 500 Internal Server Error and marks as retryable

    ReferenceError: Response is not defined

      103 |   describe('Server errors (5xx)', () => {
      104 |     test('identifies 500 Internal Server Error and marks as retryable', () => {
    > 105 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      106 |       const result = handleApiError(response, { throwOnError: false })
      107 |       
      108 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:105:24)

  ● handleApiError › Server errors (5xx) › identifies 502 Bad Gateway and marks as retryable

    ReferenceError: Response is not defined

      113 |
      114 |     test('identifies 502 Bad Gateway and marks as retryable', () => {
    > 115 |       const response = new Response(null, { status: 502, statusText: 'Bad Gateway' })
          |                        ^
      116 |       const result = handleApiError(response, { throwOnError: false })
      117 |       
      118 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:115:24)

  ● handleApiError › Server errors (5xx) › identifies 503 Service Unavailable and marks as retryable

    ReferenceError: Response is not defined

      121 |
      122 |     test('identifies 503 Service Unavailable and marks as retryable', () => {
    > 123 |       const response = new Response(null, { status: 503, statusText: 'Service Unavailable' })
          |                        ^
      124 |       const result = handleApiError(response, { throwOnError: false })
      125 |       
      126 |       expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:123:24)

  ● handleApiError › Throw behavior › throws error when throwOnError is true

    ReferenceError: Response is not defined

      131 |   describe('Throw behavior', () => {
      132 |     test('throws error when throwOnError is true', () => {
    > 133 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      134 |       
      135 |       expect(() => {
      136 |         handleApiError(response, { throwOnError: true })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:133:24)

  ● handleApiError › Throw behavior › does not throw when throwOnError is false

    ReferenceError: Response is not defined

      139 |
      140 |     test('does not throw when throwOnError is false', () => {
    > 141 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      142 |       
      143 |       expect(() => {
      144 |         handleApiError(response, { throwOnError: false })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:141:24)

  ● handleApiError › Throw behavior › includes custom error prefix in thrown error

    ReferenceError: Response is not defined

      147 |
      148 |     test('includes custom error prefix in thrown error', () => {
    > 149 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      150 |       
      151 |       expect(() => {
      152 |         handleApiError(response, {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:149:24)

  ● handleApiError › Logging behavior › logs errors when logErrors is true

    ReferenceError: Response is not defined

      173 |
      174 |     test('logs errors when logErrors is true', () => {
    > 175 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      176 |       
      177 |       handleApiError(response, { throwOnError: false, logErrors: true })
      178 |       

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:175:24)

  ● handleApiError › Logging behavior › does not log when logErrors is false

    ReferenceError: Response is not defined

      181 |
      182 |     test('does not log when logErrors is false', () => {
    > 183 |       const response = new Response(null, { status: 500, statusText: 'Internal Server Error' })
          |                        ^
      184 |       
      185 |       handleApiError(response, { throwOnError: false, logErrors: false })
      186 |       

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:183:24)

  ● handleApiError › Logging behavior › logs auth errors to console.log instead of console.error

    ReferenceError: Response is not defined

      190 |
      191 |     test('logs auth errors to console.log instead of console.error', () => {
    > 192 |       const response = new Response(null, { status: 401, statusText: 'Unauthorized' })
          |                        ^
      193 |       
      194 |       handleApiError(response, { throwOnError: false, logErrors: true })
      195 |       

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:192:24)

  ● isRetryableError › returns true for 500 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      202 | describe('isRetryableError', () => {
      203 |   test('returns true for 500 errors', () => {
    > 204 |     expect(isRetryableError(500)).toBe(true)
          |                            ^
      205 |   })
      206 |
      207 |   test('returns true for 502 errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:204:28)

  ● isRetryableError › returns true for 502 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      206 |
      207 |   test('returns true for 502 errors', () => {
    > 208 |     expect(isRetryableError(502)).toBe(true)
          |                            ^
      209 |   })
      210 |
      211 |   test('returns true for 503 errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:208:28)

  ● isRetryableError › returns true for 503 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      210 |
      211 |   test('returns true for 503 errors', () => {
    > 212 |     expect(isRetryableError(503)).toBe(true)
          |                            ^
      213 |   })
      214 |
      215 |   test('returns true for 504 errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:212:28)

  ● isRetryableError › returns true for 504 errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      214 |
      215 |   test('returns true for 504 errors', () => {
    > 216 |     expect(isRetryableError(504)).toBe(true)
          |                            ^
      217 |   })
      218 |
      219 |   test('returns false for 4xx errors', () => {

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:216:28)

  ● isRetryableError › returns false for 4xx errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      218 |
      219 |   test('returns false for 4xx errors', () => {
    > 220 |     expect(isRetryableError(400)).toBe(false)
          |                            ^
      221 |     expect(isRetryableError(404)).toBe(false)
      222 |     expect(isRetryableError(422)).toBe(false)
      223 |   })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:220:28)

  ● isRetryableError › returns false for 2xx success

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      224 |
      225 |   test('returns false for 2xx success', () => {
    > 226 |     expect(isRetryableError(200)).toBe(false)
          |                            ^
      227 |     expect(isRetryableError(201)).toBe(false)
      228 |   })
      229 |

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:226:28)

  ● isRetryableError › returns false for auth errors

    TypeError: (0 , _apierrorhandler.isRetryableError) is not a function

      229 |
      230 |   test('returns false for auth errors', () => {
    > 231 |     expect(isRetryableError(401)).toBe(false)
          |                            ^
      232 |     expect(isRetryableError(403)).toBe(false)
      233 |   })
      234 | })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:231:28)

  ● formatApiError › formats error with status and message

    TypeError: (0 , _apierrorhandler.formatApiError) is not a function

      236 | describe('formatApiError', () => {
      237 |   test('formats error with status and message', () => {
    > 238 |     const result = formatApiError(500, 'Internal Server Error', 'Failed to fetch data')
          |                                  ^
      239 |     
      240 |     expect(result).toContain('500')
      241 |     expect(result).toContain('Internal Server Error')

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:238:34)

  ● formatApiError › handles missing error prefix

    TypeError: (0 , _apierrorhandler.formatApiError) is not a function

      244 |
      245 |   test('handles missing error prefix', () => {
    > 246 |     const result = formatApiError(404, 'Not Found')
          |                                  ^
      247 |     
      248 |     expect(result).toContain('404')
      249 |     expect(result).toContain('Not Found')

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:246:34)

  ● formatApiError › formats auth errors differently

    TypeError: (0 , _apierrorhandler.formatApiError) is not a function

      251 |
      252 |   test('formats auth errors differently', () => {
    > 253 |     const result = formatApiError(401, 'Unauthorized', 'Access denied')
          |                                  ^
      254 |     
      255 |     expect(typeof result).toBe('string')
      256 |     expect(result.length).toBeGreaterThan(0)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:253:34)

  ● Edge cases and integration › handles malformed Response objects gracefully

    ReferenceError: Response is not defined

      260 | describe('Edge cases and integration', () => {
      261 |   test('handles malformed Response objects gracefully', () => {
    > 262 |     const response = new Response(null, { status: undefined as any })
          |                      ^
      263 |     
      264 |     expect(() => {
      265 |       handleApiError(response, { throwOnError: false })

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:262:22)

  ● Edge cases and integration › handles custom status codes

    ReferenceError: Response is not defined

      268 |
      269 |   test('handles custom status codes', () => {
    > 270 |     const response = new Response(null, { status: 418, statusText: "I'm a teapot" })
          |                      ^
      271 |     const result = handleApiError(response, { throwOnError: false })
      272 |     
      273 |     expect(result.isError).toBe(true)

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:270:22)

  ● Edge cases and integration › combines all options correctly

    ReferenceError: Response is not defined

      276 |
      277 |   test('combines all options correctly', () => {
    > 278 |     const response = new Response(null, { status: 500, statusText: 'Error' })
          |                      ^
      279 |     
      280 |     const result = handleApiError(response, {
      281 |       throwOnError: false,

      at Object.<anonymous> (__tests__/lib/api-error-handler.test.ts:278:22)

FAIL __tests__/auth/login-redirect.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/auth/login-redirect.test.tsx

      16 |
      17 | // Mock Supabase client
    > 18 | jest.mock('@/lib/supabase/client', () => ({
         |                ^
      19 |   createClient: jest.fn(),
      20 | }))
      21 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/auth/login-redirect.test.tsx:18:16)

FAIL __tests__/components/devices-comprehensive.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/devices-comprehensive.test.tsx

      51 | describe('DevicesHeader', () => {
      52 |   const mockOnNewDevice = jest.fn()
    > 53 |   const mockOnRefresh = jest.fn()
         |                ^
      54 |
      55 |   beforeEach(() => {
      56 |     jest.clearAllMocks()

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/devices-comprehensive.test.tsx:53:16)

FAIL tests/integration/conflict-detector.integration.test.ts
  ● ConflictDetector - Integration Tests › detectConflicts › should detect field-level conflicts

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › resolveConflicts › should auto-resolve safe conflicts

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › resolveConflicts › should queue manual conflicts to database

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › resolveConflicts › should merge arrays correctly

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

  ● ConflictDetector - Integration Tests › conflict resolution workflow › should handle full conflict resolution cycle

    TypeError: Cannot read properties of null (reading 'id')

      26 |       .select()
      27 |       .single();
    > 28 |     testOrgId = org.id;
         |                     ^
      29 |     
      30 |     // Create test device
      31 |     const { data: device } = await supabase

      at Object.id (tests/integration/conflict-detector.integration.test.ts:28:21)

FAIL __tests__/lib/format-date.test.ts
  ● formatRelativeTime › formats "just now" for recent times

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      137 |   test('formats "just now" for recent times', () => {
      138 |     const now = new Date()
    > 139 |     const result = formatRelativeTime(now.toISOString())
          |                                      ^
      140 |     expect(result).toBeTruthy()
      141 |   })
      142 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:139:38)

  ● formatRelativeTime › formats minutes ago

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      143 |   test('formats minutes ago', () => {
      144 |     const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000)
    > 145 |     const result = formatRelativeTime(fiveMinutesAgo.toISOString())
          |                                      ^
      146 |     expect(result).toBeTruthy()
      147 |   })
      148 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:145:38)

  ● formatRelativeTime › formats hours ago

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      149 |   test('formats hours ago', () => {
      150 |     const twoHoursAgo = new Date(Date.now() - 2 * 60 * 60 * 1000)
    > 151 |     const result = formatRelativeTime(twoHoursAgo.toISOString())
          |                                      ^
      152 |     expect(result).toBeTruthy()
      153 |   })
      154 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:151:38)

  ● formatRelativeTime › formats days ago

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      155 |   test('formats days ago', () => {
      156 |     const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000)
    > 157 |     const result = formatRelativeTime(threeDaysAgo.toISOString())
          |                                      ^
      158 |     expect(result).toBeTruthy()
      159 |   })
      160 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:157:38)

  ● formatRelativeTime › handles invalid dates

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      160 |
      161 |   test('handles invalid dates', () => {
    > 162 |     const result = formatRelativeTime('invalid')
          |                                      ^
      163 |     expect(result).toBe('N/A')
      164 |   })
      165 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:162:38)

  ● formatRelativeTime › handles null

    TypeError: (0 , _formatdate.formatRelativeTime) is not a function

      165 |
      166 |   test('handles null', () => {
    > 167 |     const result = formatRelativeTime(null as any)
          |                                      ^
      168 |     expect(result).toBe('N/A')
      169 |   })
      170 | })

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:167:38)

  ● formatISODate › formats dates to ISO 8601

    TypeError: (0 , _formatdate.formatISODate) is not a function

      206 |   test('formats dates to ISO 8601', () => {
      207 |     const date = new Date('2026-02-19T15:30:45Z')
    > 208 |     const result = formatISODate(date)
          |                                 ^
      209 |     expect(result).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
      210 |   })
      211 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:208:33)

  ● formatISODate › handles string input

    TypeError: (0 , _formatdate.formatISODate) is not a function

      211 |
      212 |   test('handles string input', () => {
    > 213 |     const result = formatISODate('2026-02-19T15:30:45Z')
          |                                 ^
      214 |     expect(result).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
      215 |   })
      216 |

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:213:33)

  ● formatISODate › handles timestamp input

    TypeError: (0 , _formatdate.formatISODate) is not a function

      217 |   test('handles timestamp input', () => {
      218 |     const timestamp = Date.now()
    > 219 |     const result = formatISODate(timestamp)
          |                                 ^
      220 |     expect(result).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)
      221 |   })
      222 | })

      at Object.<anonymous> (__tests__/lib/format-date.test.ts:219:33)

FAIL __tests__/components/ui/badge.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/badge.test.tsx

       8 | import { Badge, badgeVariants } from '@/components/ui/badge'
       9 |
    > 10 | describe('Badge Component - Real Source Code Tests', () => {
         |                 ^
      11 |   describe('Basic Rendering', () => {
      12 |     test('should render badge with text', () => {
      13 |       render(<Badge>Test Badge</Badge>)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/badge.test.tsx:10:17)

FAIL __tests__/components/client-components.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/client-components.test.tsx

      112 |     const { container } = render(<SystemStatsCard />)
      113 |     await waitFor(() => expect(container).toBeTruthy())
    > 114 |   })
          |     ^
      115 |
      116 |   test('DashboardOverview renders', async () => {
      117 |     const { DashboardOverview } = await import('@/components/dashboard/DashboardOverview')

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/client-components.test.tsx:114:17)

FAIL __tests__/components/ui/label-card-alert.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/ui/label-card-alert.test.tsx

       7 | import { Label } from '@/components/ui/label'
       8 | import { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from '@/components/ui/card'
    >  9 | import { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert'
         |                 ^
      10 |
      11 | describe('Label Component - Real Source Code Tests', () => {
      12 |   test('should render label element', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/ui/label-card-alert.test.tsx:9:17)

FAIL __tests__/unit-conversion.test.ts
  ● Unit Conversion Utilities › convertMeasurementValues › handles invalid numeric values gracefully

    expect(received).toBeCloseTo(expected, precision)

    Matcher error: received value must be a number

    Received has type:  string
    Received has value: "78.8"

      125 |       const result = convertMeasurementValues('invalid', '26', '10', '35', '°C', '°F')
      126 |       expect(result.lowerNormal).toBe('')
    > 127 |       expect(result.upperNormal).toBeCloseTo(78.8, 1)
          |                                  ^
      128 |     })
      129 |
      130 |     test('returns empty strings when conversion not available', () => {

      at Object.toBeCloseTo (__tests__/unit-conversion.test.ts:127:34)

FAIL src/lib/sync/__tests__/integration-sync-orchestrator.test.ts
  ● IntegrationSyncOrchestrator › syncIntegration › should successfully sync devices from provider

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      100 |       const result = await orchestrator.syncIntegration('org-001', 'int-001');
      101 |
    > 102 |       expect(result.success).toBe(true);
          |                              ^
      103 |       expect(result.devicesProcessed).toBeGreaterThan(0);
      104 |     });
      105 |

      at Object.toBe (src/lib/sync/__tests__/integration-sync-orchestrator.test.ts:102:30)

  ● IntegrationSyncOrchestrator › syncIntegration › should handle connection test failures

    expect(received).toContain(expected) // indexOf

    Expected substring: "Connection timeout"
    Received string:    "this.supabase.from(...).select(...).eq is not a function"

      122 |       expect(result.success).toBe(false);
      123 |       expect(result.errors).toHaveLength(1);
    > 124 |       expect(result.errors[0].error).toContain('Connection timeout');
          |                                      ^
      125 |     });
      126 |
      127 |     it('should support dry run mode', async () => {

      at Object.toContain (src/lib/sync/__tests__/integration-sync-orchestrator.test.ts:124:38)

FAIL __tests__/components/alerts/AlertsList.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/utils/test-utils.tsx
      __tests__/components/alerts/AlertsList.test.tsx

      33 |     loading: boolean
      34 |     error: string | null
    > 35 |     isSuperAdmin: boolean
         |                          ^
      36 |     isOrgOwner: boolean
      37 |     isOrgAdmin: boolean
      38 |     role: string | null

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/utils/test-utils.tsx:35:30)
      at Object.<anonymous> (__tests__/components/alerts/AlertsList.test.tsx:26:20)

FAIL __tests__/components/organizations-real.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/organizations-real.test.tsx

      112 |     await waitFor(() => expect(container).toBeTruthy())
      113 |   })
    > 114 |
          | ^
      115 |   test('OrganizationSelector renders with context', async () => {
      116 |     const { OrganizationSelector } = await import('@/components/organization/OrganizationSelector')
      117 |     const { container } = render(<OrganizationSelector />)

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/organizations-real.test.tsx:114:17)

FAIL __tests__/pages/all-pages.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/pages/all-pages.test.tsx

      32 |
      33 | describe('Dashboard Pages', () => {
    > 34 |   test('Dashboard main page renders', async () => {
         |                 ^
      35 |     const DashboardPage = (await import('@/app/dashboard/page')).default
      36 |     const { container } = render(<DashboardPage />)
      37 |     await waitFor(() => expect(container.firstChild).toBeTruthy())

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/pages/all-pages.test.tsx:34:17)

FAIL __tests__/lib/utils-extended.test.ts
  ● Utility Functions - Extended Tests › formatDate › formats valid ISO date string

    TypeError: (0 , _utils.formatDate) is not a function

       8 |   describe('formatDate', () => {
       9 |     test('formats valid ISO date string', () => {
    > 10 |       const result = formatDate('2024-01-15T10:30:00Z')
         |                                ^
      11 |       expect(result).toBeTruthy()
      12 |       expect(typeof result).toBe('string')
      13 |     })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:10:32)

  ● Utility Functions - Extended Tests › formatDate › handles Date object

    TypeError: (0 , _utils.formatDate) is not a function

      15 |     test('handles Date object', () => {
      16 |       const date = new Date('2024-01-15')
    > 17 |       const result = formatDate(date.toISOString())
         |                                ^
      18 |       expect(result).toBeTruthy()
      19 |     })
      20 |

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:17:32)

  ● Utility Functions - Extended Tests › formatDate › handles different date formats

    TypeError: (0 , _utils.formatDate) is not a function

      20 |
      21 |     test('handles different date formats', () => {
    > 22 |       const result1 = formatDate('2024-01-01')
         |                                 ^
      23 |       const result2 = formatDate('2024-12-31')
      24 |       expect(result1).toBeTruthy()
      25 |       expect(result2).toBeTruthy()

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:22:33)

  ● Utility Functions - Extended Tests › isValidEmail › validates standard email formats

    TypeError: (0 , _utils.isValidEmail) is not a function

      29 |   describe('isValidEmail', () => {
      30 |     test('validates standard email formats', () => {
    > 31 |       expect(isValidEmail('user@example.com')).toBe(true)
         |                          ^
      32 |       expect(isValidEmail('user.name@example.com')).toBe(true)
      33 |       expect(isValidEmail('user+tag@example.co.uk')).toBe(true)
      34 |     })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:31:26)

  ● Utility Functions - Extended Tests › isValidEmail › rejects invalid email formats

    TypeError: (0 , _utils.isValidEmail) is not a function

      35 |
      36 |     test('rejects invalid email formats', () => {
    > 37 |       expect(isValidEmail('notanemail')).toBe(false)
         |                          ^
      38 |       expect(isValidEmail('@example.com')).toBe(false)
      39 |       expect(isValidEmail('user@')).toBe(false)
      40 |       expect(isValidEmail('user@.com')).toBe(false)

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:37:26)

  ● Utility Functions - Extended Tests › isValidEmail › handles edge cases

    TypeError: (0 , _utils.isValidEmail) is not a function

      42 |
      43 |     test('handles edge cases', () => {
    > 44 |       expect(isValidEmail('')).toBe(false)
         |                          ^
      45 |       expect(isValidEmail('user name@example.com')).toBe(false)
      46 |     })
      47 |   })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:44:26)

  ● Utility Functions - Extended Tests › getInitials › extracts initials from full names

    TypeError: (0 , _utils.getInitials) is not a function

      49 |   describe('getInitials', () => {
      50 |     test('extracts initials from full names', () => {
    > 51 |       expect(getInitials('John Doe')).toBeTruthy()
         |                         ^
      52 |       expect(getInitials('Alice Bob Charlie')).toBeTruthy()
      53 |     })
      54 |

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:51:25)

  ● Utility Functions - Extended Tests › getInitials › handles single names

    TypeError: (0 , _utils.getInitials) is not a function

      54 |
      55 |     test('handles single names', () => {
    > 56 |       const result = getInitials('John')
         |                                 ^
      57 |       expect(result).toBeTruthy()
      58 |       expect(result.length).toBeGreaterThan(0)
      59 |     })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:56:33)

  ● Utility Functions - Extended Tests › getInitials › handles empty or whitespace input

    TypeError: (0 , _utils.getInitials) is not a function

      60 |
      61 |     test('handles empty or whitespace input', () => {
    > 62 |       const result1 = getInitials('')
         |                                  ^
      63 |       const result2 = getInitials('   ')
      64 |       expect(result1).toBeDefined()
      65 |       expect(result2).toBeDefined()

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:62:34)

  ● Utility Functions - Extended Tests › getInitials › handles special characters

    TypeError: (0 , _utils.getInitials) is not a function

      67 |
      68 |     test('handles special characters', () => {
    > 69 |       const result = getInitials("O'Brien")
         |                                 ^
      70 |       expect(result).toBeTruthy()
      71 |     })
      72 |   })

      at Object.<anonymous> (__tests__/lib/utils-extended.test.ts:69:33)

FAIL __tests__/app/settings-components.test.tsx
  ● Settings Components › UsersTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/UsersTab' from '__tests__/app/settings-components.test.tsx'

      10 |
      11 |   test('UsersTab module loads', async () => {
    > 12 |     const module2 = await import('@/app/dashboard/settings/components/UsersTab')
         |                           ^
      13 |     expect(module2.default).toBeDefined()
      14 |   })
      15 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:12:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:12:21)

  ● Settings Components › OrganizationsTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/OrganizationsTab' from '__tests__/app/settings-components.test.tsx'

      15 |
      16 |   test('OrganizationsTab module loads', async () => {
    > 17 |     const module3 = await import('@/app/dashboard/settings/components/OrganizationsTab')
         |                           ^
      18 |     expect(module3.default).toBeDefined()
      19 |   })
      20 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:17:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:17:21)

  ● Settings Components › GeneralTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/GeneralTab' from '__tests__/app/settings-components.test.tsx'

      20 |
      21 |   test('GeneralTab module loads', async () => {
    > 22 |     const module4 = await import('@/app/dashboard/settings/components/GeneralTab')
         |                           ^
      23 |     expect(module4.default).toBeDefined()
      24 |   })
      25 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:22:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:22:21)

  ● Settings Components › DevicesTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/DevicesTab' from '__tests__/app/settings-components.test.tsx'

      25 |
      26 |   test('DevicesTab module loads', async () => {
    > 27 |     const module5 = await import('@/app/dashboard/settings/components/DevicesTab')
         |                           ^
      28 |     expect(module5.default).toBeDefined()
      29 |   })
      30 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:27:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:27:21)

  ● Settings Components › AlertsTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/AlertsTab' from '__tests__/app/settings-components.test.tsx'

      30 |
      31 |   test('AlertsTab module loads', async () => {
    > 32 |     const module6 = await import('@/app/dashboard/settings/components/AlertsTab')
         |                           ^
      33 |     expect(module6.default).toBeDefined()
      34 |   })
      35 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:32:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:32:21)

  ● Settings Components › SystemTab module loads

    Cannot find module '../../src/app/dashboard/settings/components/SystemTab' from '__tests__/app/settings-components.test.tsx'

      35 |
      36 |   test('SystemTab module loads', async () => {
    > 37 |     const module7 = await import('@/app/dashboard/settings/components/SystemTab')
         |                           ^
      38 |     expect(module7.default).toBeDefined()
      39 |   })
      40 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/app/settings-components.test.tsx:37:27
      at Object.<anonymous> (__tests__/app/settings-components.test.tsx:37:21)

FAIL __tests__/app/layouts.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/app/layouts.test.tsx

      88 | })
      89 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/app/layouts.test.tsx:90:17)

FAIL __tests__/pages/additional-pages.test.tsx
  ● Additional Pages › Test Notification page module loads

    Cannot find module '../../src/app/test-notifications/page' from '__tests__/pages/additional-pages.test.tsx'

      58 |   test('Test Notification page module loads', async () => {
      59 |     // Just verify module can be imported
    > 60 |     const notificationModule = await import('@/app/test-notifications/page')
         |                                      ^
      61 |     expect(notificationModule.default).toBeDefined()
      62 |   })
      63 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at __tests__/pages/additional-pages.test.tsx:60:38
      at Object.<anonymous> (__tests__/pages/additional-pages.test.tsx:60:32)

FAIL __tests__/components/integrations-real.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/components/integrations-real.test.tsx



      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/components/integrations-real.test.tsx:70:17)

FAIL __tests__/pages/dashboard.test.tsx
  ● Test suite failed to run

    Cannot find module '@testing-library/dom' from 'node_modules/@testing-library/react/dist/pure.js'

    Require stack:
      node_modules/@testing-library/react/dist/pure.js
      node_modules/@testing-library/react/dist/index.js
      __tests__/pages/dashboard.test.tsx

      58 |     })
      59 |   })
    > 60 |
         | ^
      61 |   test('dashboard page has content', async () => {
      62 |     render(<DashboardPage />)
      63 |     

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/pure.js:46:12)
      at Object.<anonymous> (node_modules/@testing-library/react/dist/index.js:7:13)
      at Object.<anonymous> (__tests__/pages/dashboard.test.tsx:60:17)

FAIL __tests__/lib/utils-additional.test.ts
  ● Utils - formatDate › formats date correctly

    TypeError: (0 , _utils.formatDate) is not a function

       9 |   test('formats date correctly', () => {
      10 |     const date = new Date('2024-01-15T10:30:00Z')
    > 11 |     const formatted = formatDate(date.toISOString())
         |                                 ^
      12 |     expect(formatted).toContain('Jan')
      13 |   })
      14 |

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:11:33)

  ● Utils - formatDate › handles invalid date

    TypeError: (0 , _utils.formatDate) is not a function

      14 |
      15 |   test('handles invalid date', () => {
    > 16 |     const result = formatDate('invalid')
         |                              ^
      17 |     expect(result).toBe('Invalid Date')
      18 |   })
      19 | })

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:16:30)

  ● Utils - isValidEmail › validates correct email

    TypeError: (0 , _utils.isValidEmail) is not a function

      21 | describe('Utils - isValidEmail', () => {
      22 |   test('validates correct email', () => {
    > 23 |     expect(isValidEmail('test@example.com')).toBe(true)
         |                        ^
      24 |   })
      25 |
      26 |   test('rejects invalid email', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:23:24)

  ● Utils - isValidEmail › rejects invalid email

    TypeError: (0 , _utils.isValidEmail) is not a function

      25 |
      26 |   test('rejects invalid email', () => {
    > 27 |     expect(isValidEmail('notanemail')).toBe(false)
         |                        ^
      28 |   })
      29 |
      30 |   test('rejects email without domain', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:27:24)

  ● Utils - isValidEmail › rejects email without domain

    TypeError: (0 , _utils.isValidEmail) is not a function

      29 |
      30 |   test('rejects email without domain', () => {
    > 31 |     expect(isValidEmail('test@')).toBe(false)
         |                        ^
      32 |   })
      33 | })
      34 |

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:31:24)

  ● Utils - getInitials › gets initials from full name

    TypeError: (0 , _utils.getInitials) is not a function

      35 | describe('Utils - getInitials', () => {
      36 |   test('gets initials from full name', () => {
    > 37 |     expect(getInitials('John Doe')).toBe('JD')
         |                       ^
      38 |   })
      39 |
      40 |   test('handles single name', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:37:23)

  ● Utils - getInitials › handles single name

    TypeError: (0 , _utils.getInitials) is not a function

      39 |
      40 |   test('handles single name', () => {
    > 41 |     expect(getInitials('John')).toBe('J')
         |                       ^
      42 |   })
      43 |
      44 |   test('handles empty string', () => {

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:41:23)

  ● Utils - getInitials › handles empty string

    TypeError: (0 , _utils.getInitials) is not a function

      43 |
      44 |   test('handles empty string', () => {
    > 45 |     expect(getInitials('')).toBe('??')
         |                       ^
      46 |   })
      47 | })
      48 |

      at Object.<anonymous> (__tests__/lib/utils-additional.test.ts:45:23)


Test Suites: 28 failed, 32 passed, 60 total
Tests:       148 failed, 805 passed, 953 total
Snapshots:   0 total
Time:        11.64 s
Ran all test suites.
